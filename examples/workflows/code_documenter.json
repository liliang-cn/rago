{
  "steps": [
    {
      "id": "list_go_files",
      "name": "Find Go Files",
      "type": "tool",
      "tool": "filesystem",
      "inputs": {
        "action": "list",
        "path": "{{input.directory}}",
        "pattern": "*.go"
      },
      "outputs": {
        "files": "go_files"
      }
    },
    {
      "id": "read_file",
      "name": "Read Source Code",
      "type": "loop",
      "iterator": "{{go_files}}",
      "steps": [
        {
          "id": "read_source",
          "type": "tool",
          "tool": "filesystem",
          "inputs": {
            "action": "read",
            "path": "{{item}}"
          },
          "outputs": {
            "content": "source_code"
          }
        },
        {
          "id": "generate_docs",
          "type": "tool",
          "tool": "sequential-thinking",
          "inputs": {
            "task": "Generate comprehensive documentation for this Go code including: purpose, functions, usage examples",
            "code": "{{source_code}}"
          },
          "outputs": {
            "documentation": "doc_content"
          }
        },
        {
          "id": "save_docs",
          "type": "tool",
          "tool": "filesystem",
          "inputs": {
            "action": "write",
            "path": "{{item}}.md",
            "content": "{{doc_content}}"
          }
        }
      ]
    }
  ]
}