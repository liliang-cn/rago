{
  "steps": [
    {
      "id": "scan_directory",
      "name": "Scan Downloads Folder",
      "type": "tool",
      "tool": "filesystem",
      "inputs": {
        "action": "list",
        "path": "{{input.source_dir}}",
        "recursive": false
      },
      "outputs": {
        "files": "file_list"
      }
    },
    {
      "id": "process_files",
      "name": "Categorize Each File",
      "type": "loop",
      "iterator": "{{file_list}}",
      "steps": [
        {
          "id": "analyze_file",
          "type": "tool",
          "tool": "sequential-thinking",
          "inputs": {
            "task": "Categorize this file based on its name and extension. Return one of: documents, images, videos, code, data, archives, other",
            "filename": "{{item}}"
          },
          "outputs": {
            "category": "file_category"
          }
        },
        {
          "id": "create_folder",
          "type": "tool",
          "tool": "filesystem",
          "inputs": {
            "action": "mkdir",
            "path": "{{input.target_dir}}/{{file_category}}"
          }
        },
        {
          "id": "move_file",
          "type": "tool",
          "tool": "filesystem",
          "inputs": {
            "action": "move",
            "source": "{{input.source_dir}}/{{item}}",
            "destination": "{{input.target_dir}}/{{file_category}}/{{item}}"
          }
        },
        {
          "id": "log_move",
          "type": "tool",
          "tool": "memory",
          "inputs": {
            "action": "append",
            "key": "organized_files",
            "value": "Moved {{item}} to {{file_category}}\n"
          }
        }
      ]
    },
    {
      "id": "generate_report",
      "name": "Create Organization Report",
      "type": "tool",
      "tool": "memory",
      "inputs": {
        "action": "retrieve",
        "key": "organized_files"
      },
      "outputs": {
        "value": "organization_log"
      }
    },
    {
      "id": "save_report",
      "type": "tool",
      "tool": "filesystem",
      "inputs": {
        "action": "write",
        "path": "{{input.target_dir}}/organization_report.txt",
        "content": "File Organization Report\n========================\n\n{{organization_log}}"
      }
    }
  ]
}