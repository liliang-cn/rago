# RAGO å·¥å…·è°ƒç”¨åŠŸèƒ½å®æ–½è¿›åº¦

## å·²å®Œæˆ

### âœ… é˜¶æ®µ1: åŸºç¡€æ¶æ„ (å®Œæˆ)
- [x] **å®šä¹‰å·¥å…·æ¥å£å’ŒåŸºç¡€ç±»å‹** (`internal/tools/types.go`)
- [x] **å®ç°å·¥å…·æ³¨å†Œç®¡ç†å™¨** (`internal/tools/registry.go`)
- [x] **åˆ›å»ºåŸºç¡€çš„å·¥å…·æ‰§è¡Œå¼•æ“** (`internal/tools/executor.go`)
- [x] **æ‰©å±•é…ç½®ç³»ç»Ÿ** (`internal/config/config.go`)

### âœ… æ’ä»¶åŒ–æ¶æ„ (å®Œæˆ) ğŸ¯
- [x] **è®¾è®¡å’Œå®ç°æ’ä»¶ç®¡ç†å™¨** (`internal/tools/plugin_manager.go`)
  - æ”¯æŒåŠ¨æ€åŠ è½½ .so æ–‡ä»¶
  - æ’ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç† (åŠ è½½/å¸è½½/é‡è½½)
  - æ’ä»¶ç™½åå•/é»‘åå•å®‰å…¨æ§åˆ¶
  - æ’ä»¶å…ƒæ•°æ®å’ŒçŠ¶æ€ç®¡ç†

- [x] **åˆ›å»ºæ’ä»¶ç¤ºä¾‹å’Œæ–‡æ¡£** (`internal/tools/plugin_example.go`)
  - å®Œæ•´çš„æ’ä»¶å¼€å‘æ¨¡æ¿
  - è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜å’Œæœ€ä½³å®è·µ
  - ç¼–è¯‘å’Œéƒ¨ç½²æŒ‡å¯¼

- [x] **æ‰©å±•é…ç½®ç³»ç»Ÿæ”¯æŒæ’ä»¶** 
  - æ’ä»¶è·¯å¾„é…ç½®
  - æ’ä»¶ç‰¹å®šå‚æ•°é…ç½®
  - ç¯å¢ƒå˜é‡ç»‘å®š

- [x] **æ’ä»¶æ¶æ„æ–‡æ¡£** (`PLUGIN_ARCHITECTURE.md`)
  - å®Œæ•´çš„æ’ä»¶å¼€å‘æŒ‡å—
  - é…ç½®ç¤ºä¾‹å’Œä½¿ç”¨è¯´æ˜
  - å®‰å…¨è€ƒè™‘å’Œæœ€ä½³å®è·µ

### âœ… é˜¶æ®µ2: LLMé›†æˆ (éƒ¨åˆ†å®Œæˆ)
- [x] **æ‰©å±•Generatoræ¥å£æ”¯æŒå·¥å…·è°ƒç”¨** (`internal/domain/types.go`)
- [x] **æ›´æ–°OllamaServiceå®ç°å·¥å…·è°ƒç”¨** (`internal/llm/ollama.go`)

## è¿›è¡Œä¸­

### ğŸš§ é˜¶æ®µ2: LLMé›†æˆ (2/4 å·²å®Œæˆ)
- [ ] **å®ç°å·¥å…·è°ƒç”¨çš„è¯·æ±‚/å“åº”å¤„ç†**
  - éœ€è¦å®ç°å·¥å…·è°ƒç”¨ç»“æœçš„å¤„ç†é€»è¾‘
  - å¤„ç†å¤šè½®å¯¹è¯ä¸­çš„å·¥å…·è°ƒç”¨
  
- [ ] **æ·»åŠ æµå¼å·¥å…·è°ƒç”¨æ”¯æŒ** 
  - å®Œå–„æµå¼å¤„ç†ä¸­çš„å·¥å…·è°ƒç”¨é€»è¾‘
  - å®ç°å®æ—¶å·¥å…·æ‰§è¡Œåé¦ˆ

## å¾…å®Œæˆ

### â³ é˜¶æ®µ3: å†…ç½®å·¥å…·
- [ ] **å®ç°å®ç”¨å·¥å…·é›†**
  - åˆ›å»º `internal/tools/builtin/` ç›®å½•
  - å®ç°æ—¥æœŸæ—¶é—´å·¥å…· (`DateTimeTool`) - è·å–å½“å‰æ—¶é—´ã€æ—¥æœŸè®¡ç®—ç­‰
  - å®ç°SQLæŸ¥è¯¢å·¥å…· (`SQLQueryTool`) - è¿æ¥å¤–éƒ¨æ•°æ®åº“æŸ¥è¯¢
  - å®ç°æ–‡ä»¶æ“ä½œå·¥å…· (`FileReadTool`, `FileListTool`) - å®‰å…¨çš„æ–‡ä»¶ç³»ç»Ÿè®¿é—®

- [ ] **å®ç°RAGä¸“ç”¨å·¥å…·**
  - å®ç°RAGæœç´¢å·¥å…· (`RAGSearchTool`) - æœç´¢çŸ¥è¯†åº“å†…å®¹
  - å®ç°æ–‡æ¡£ç®¡ç†å·¥å…· (`DocumentManagementTool`) - ç®¡ç†æ–‡æ¡£å…ƒæ•°æ®
  - å®ç°ç»Ÿè®¡åˆ†æå·¥å…· (`StatsQueryTool`) - åˆ†ææ–‡æ¡£å’ŒæŸ¥è¯¢ç»Ÿè®¡

### â³ é˜¶æ®µ4: APIé›†æˆ
- [ ] **æ‰©å±•æŸ¥è¯¢å¤„ç†å™¨æ”¯æŒå·¥å…·è°ƒç”¨**
  - æ›´æ–° `internal/processor/service.go`
  - å®ç° `QueryWithTools` æ–¹æ³•
  - é›†æˆå·¥å…·æ‰§è¡Œå¼•æ“

- [ ] **æ·»åŠ æ–°çš„APIç«¯ç‚¹**
  - åˆ›å»º `api/handlers/tools.go`
  - å®ç°å·¥å…·åˆ—è¡¨ã€è¯¦æƒ…ã€æ‰§è¡Œç­‰ç«¯ç‚¹
  - å®ç°å¸¦å·¥å…·è°ƒç”¨çš„æŸ¥è¯¢ç«¯ç‚¹

- [ ] **æ›´æ–°CLIå‘½ä»¤æ”¯æŒå·¥å…·è°ƒç”¨**
  - æ‰©å±• `cmd/rago/query.go` æ”¯æŒå·¥å…·è°ƒç”¨é€‰é¡¹
  - æ·»åŠ æ–°çš„å·¥å…·ç®¡ç†å‘½ä»¤
  - æ›´æ–°å¸®åŠ©æ–‡æ¡£

### â³ é˜¶æ®µ5: å®‰å…¨å’Œä¼˜åŒ–
- [ ] **å®ç°æƒé™æ§åˆ¶ç³»ç»Ÿ**
  - å®ç°å·¥å…·æƒé™éªŒè¯
  - æ·»åŠ ç”¨æˆ·æƒé™ç®¡ç†
  - å®ç°èµ„æºè®¿é—®æ§åˆ¶

- [ ] **æ·»åŠ æ‰§è¡Œæ²™ç®±**
  - å®ç°å®‰å…¨æ²™ç®±ç¯å¢ƒ
  - é™åˆ¶å·¥å…·çš„ç³»ç»Ÿè®¿é—®
  - æ·»åŠ èµ„æºä½¿ç”¨ç›‘æ§

## å…³é”®æ–‡ä»¶ç»“æ„

```
internal/
â”œâ”€â”€ tools/
â”‚   â”œâ”€â”€ types.go              âœ… å·¥å…·æ¥å£å’ŒåŸºç¡€ç±»å‹
â”‚   â”œâ”€â”€ registry.go           âœ… å·¥å…·æ³¨å†Œç®¡ç†å™¨
â”‚   â”œâ”€â”€ executor.go           âœ… å·¥å…·æ‰§è¡Œå¼•æ“
â”‚   â”œâ”€â”€ plugin_manager.go     âœ… æ’ä»¶ç®¡ç†å™¨
â”‚   â”œâ”€â”€ plugin_example.go     âœ… æ’ä»¶å¼€å‘ç¤ºä¾‹
â”‚   â””â”€â”€ builtin/              â³ å†…ç½®å·¥å…·å®ç°
â”‚       â”œâ”€â”€ datetime.go       â³ æ—¥æœŸæ—¶é—´å·¥å…·
â”‚       â”œâ”€â”€ sql.go            â³ SQLæŸ¥è¯¢å·¥å…·
â”‚       â”œâ”€â”€ file.go           â³ æ–‡ä»¶æ“ä½œå·¥å…·
â”‚       â””â”€â”€ rag_tools.go      â³ RAGä¸“ç”¨å·¥å…·
â”œâ”€â”€ config/
â”‚   â””â”€â”€ config.go             âœ… æ‰©å±•é…ç½®æ”¯æŒå·¥å…·å’Œæ’ä»¶
â”œâ”€â”€ domain/
â”‚   â””â”€â”€ types.go              âœ… æ‰©å±•é¢†åŸŸç±»å‹
â”œâ”€â”€ llm/
â”‚   â””â”€â”€ ollama.go             âœ… æ·»åŠ å·¥å…·è°ƒç”¨æ”¯æŒ
â””â”€â”€ processor/
    â””â”€â”€ service.go            â³ é›†æˆå·¥å…·è°ƒç”¨åˆ°æŸ¥è¯¢å¤„ç†

api/handlers/
â”œâ”€â”€ tools.go                  â³ å·¥å…·ç›¸å…³APIç«¯ç‚¹
â””â”€â”€ plugins.go                â³ æ’ä»¶ç®¡ç†APIç«¯ç‚¹

cmd/rago/
â”œâ”€â”€ tools.go                  â³ å·¥å…·ç®¡ç†CLIå‘½ä»¤
â””â”€â”€ plugins.go                â³ æ’ä»¶ç®¡ç†CLIå‘½ä»¤

plugins/                      â³ æ’ä»¶ç›®å½•
â””â”€â”€ example_plugin.so         â³ ç¤ºä¾‹æ’ä»¶

PLUGIN_ARCHITECTURE.md        âœ… æ’ä»¶å¼€å‘å®Œæ•´æŒ‡å—
```

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **ç«‹å³**: å®Œæˆé˜¶æ®µ2å‰©ä½™å·¥ä½œ - å®ç°å·¥å…·è°ƒç”¨çš„è¯·æ±‚/å“åº”å¤„ç†
2. **æ¥ä¸‹æ¥**: å®ç°å®ç”¨å†…ç½®å·¥å…·ï¼ˆæ—¥æœŸæ—¶é—´ã€SQLæŸ¥è¯¢ã€æ–‡ä»¶æ“ä½œï¼‰
3. **ç„¶å**: å®ç°RAGä¸“ç”¨å·¥å…·å¹¶é›†æˆåˆ°å¤„ç†å™¨
4. **æœ€å**: æ·»åŠ APIç«¯ç‚¹å’ŒCLIæ”¯æŒ

## é…ç½®ç¤ºä¾‹

åˆ›å»ºçš„é…ç½®å°†æ”¯æŒå¦‚ä¸‹ç»“æ„ï¼š

```toml
[tools]
enabled = true
max_concurrent_calls = 3
call_timeout = "30s"
security_level = "normal"
enabled_tools = ["datetime", "sql_query", "rag_search", "file_read"]

[tools.builtin]
datetime = { enabled = true }
sql_query = { 
    enabled = true, 
    max_connections = 5,
    allowed_drivers = ["postgres", "mysql", "sqlite"]
}
rag_search = { enabled = true }
file_read = { 
    enabled = true,
    allowed_paths = ["/safe/path/*", "./documents/*"]
}

[tools.plugins]
enabled = true
auto_load = true
plugin_paths = ["./plugins", "./tools/plugins"]
whitelist = []  # ç©º=å…è®¸æ‰€æœ‰
blacklist = ["dangerous_plugin"]

[tools.plugins.configs.weather_plugin]
api_key = "${WEATHER_API_KEY}"
timeout = "10s"
```

## APIç¤ºä¾‹

å®ç°åå°†æ”¯æŒï¼š

```bash
# å·¥å…·ç®¡ç†
GET /api/tools
GET /api/tools/datetime
POST /api/tools/datetime/execute

# æ’ä»¶ç®¡ç†
GET /api/plugins
GET /api/plugins/weather-plugin
POST /api/plugins/weather-plugin/reload

# å¸¦å·¥å…·è°ƒç”¨çš„æŸ¥è¯¢
POST /api/query/with-tools
POST /api/query/with-tools/stream
```

## æµ‹è¯•è®¡åˆ’

1. å•å…ƒæµ‹è¯•æ‰€æœ‰å·¥å…·å®ç°
2. é›†æˆæµ‹è¯•å·¥å…·è°ƒç”¨æµç¨‹
3. æ€§èƒ½æµ‹è¯•å¹¶å‘æ‰§è¡Œ
4. å®‰å…¨æµ‹è¯•æƒé™æ§åˆ¶

---
**æ›´æ–°æ—¶é—´**: 2025-01-08
**å®Œæˆåº¦**: 50% (10/20 ä¸ªä¸»è¦ä»»åŠ¡)

## ğŸ¯ æ’ä»¶åŒ–æ¶æ„äº®ç‚¹

é€šè¿‡æ’ä»¶åŒ–è®¾è®¡ï¼ŒRAGOçš„å·¥å…·è°ƒç”¨ç³»ç»Ÿå®ç°äº†ï¼š

- **åŠ¨æ€æ‰©å±•**: æ— éœ€é‡ç¼–è¯‘å³å¯æ·»åŠ æ–°å·¥å…·
- **ç¤¾åŒºç”Ÿæ€**: æ”¯æŒç¬¬ä¸‰æ–¹å¼€å‘è€…è´¡çŒ®å·¥å…·æ’ä»¶  
- **å®‰å…¨éš”ç¦»**: æ’ä»¶æ²™ç®±å’Œæƒé™æ§åˆ¶
- **çƒ­æ›´æ–°**: æ”¯æŒæ’ä»¶çš„åŠ¨æ€åŠ è½½/å¸è½½/é‡è½½
- **é…ç½®çµæ´»**: ç»†ç²’åº¦çš„æ’ä»¶é…ç½®ç®¡ç†

è¿™ä½¿å¾—RAGOä¸ä»…æ˜¯ä¸€ä¸ªRAGç³»ç»Ÿï¼Œæ›´æ˜¯ä¸€ä¸ªå¯æ‰©å±•çš„AIå·¥å…·å¹³å°ã€‚