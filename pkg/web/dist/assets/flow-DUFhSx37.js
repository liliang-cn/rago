import{r as b,g as Ai,b as N}from"./vendor-BqSMHcVE.js";import{i as Ci,a as Yn,b as Mi,c as Un,d as $i,e as Ti,f as ki}from"./charts-D8M7_Ylf.js";const Ii={},Xn=t=>{let e;const n=new Set,r=(l,d)=>{const g=typeof l=="function"?l(e):l;if(!Object.is(g,e)){const h=e;e=d??(typeof g!="object"||g===null)?g:Object.assign({},e,g),n.forEach(x=>x(e,h))}},o=()=>e,a={setState:r,getState:o,getInitialState:()=>u,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{(Ii?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(r,o,a);return a},zi=t=>t?Xn(t):Xn;var Sr={exports:{}},br={},Nr={exports:{}},Ar={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ne=b;function Di(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ri=typeof Object.is=="function"?Object.is:Di,Pi=ne.useState,Hi=ne.useEffect,Bi=ne.useLayoutEffect,Vi=ne.useDebugValue;function Li(t,e){var n=e(),r=Pi({inst:{value:n,getSnapshot:e}}),o=r[0].inst,i=r[1];return Bi(function(){o.value=n,o.getSnapshot=e,tn(o)&&i({inst:o})},[t,n,e]),Hi(function(){return tn(o)&&i({inst:o}),t(function(){tn(o)&&i({inst:o})})},[t]),Vi(n),n}function tn(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ri(t,n)}catch{return!0}}function Fi(t,e){return e()}var Oi=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Fi:Li;Ar.useSyncExternalStore=ne.useSyncExternalStore!==void 0?ne.useSyncExternalStore:Oi;Nr.exports=Ar;var Yi=Nr.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ye=b,Ui=Yi;function Xi(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wi=typeof Object.is=="function"?Object.is:Xi,Zi=Ui.useSyncExternalStore,Gi=Ye.useRef,Ki=Ye.useEffect,qi=Ye.useMemo,Qi=Ye.useDebugValue;br.useSyncExternalStoreWithSelector=function(t,e,n,r,o){var i=Gi(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=qi(function(){function a(h){if(!u){if(u=!0,l=h,h=r(h),o!==void 0&&s.hasValue){var x=s.value;if(o(x,h))return d=x}return d=h}if(x=d,Wi(l,h))return x;var p=r(h);return o!==void 0&&o(x,p)?(l=h,x):(l=h,d=p)}var u=!1,l,d,g=n===void 0?null:n;return[function(){return a(e())},g===null?void 0:function(){return a(g())}]},[e,n,r,o]);var c=Zi(t,i[0],i[1]);return Ki(function(){s.hasValue=!0,s.value=c},[c]),Qi(c),c};Sr.exports=br;var Ji=Sr.exports;const ji=Ai(Ji);function st(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=st(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}const{useDebugValue:ts}=N,{useSyncExternalStoreWithSelector:es}=ji,ns=t=>t;function Cr(t,e=ns,n){const r=es(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return ts(r),r}const Wn=(t,e)=>{const n=zi(t),r=(o,i=e)=>Cr(n,o,i);return Object.assign(r,n),r},rs=(t,e)=>t?Wn(t,e):Wn;function ot(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,o]of t)if(!Object.is(o,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var os={value:()=>{}};function Ue(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ke(n)}function ke(t){this._=t}function is(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ke.prototype=Ue.prototype={constructor:ke,on:function(t,e){var n=this._,r=is(t+"",n),o,i=-1,s=r.length;if(arguments.length<2){for(;++i<s;)if((o=(t=r[i]).type)&&(o=ss(n[o],t.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<s;)if(o=(t=r[i]).type)n[o]=Zn(n[o],t.name,e);else if(e==null)for(o in n)n[o]=Zn(n[o],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ke(t)},call:function(t,e){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(e,n)}};function ss(t,e){for(var n=0,r=t.length,o;n<r;++n)if((o=t[n]).name===e)return o.value}function Zn(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=os,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var un="http://www.w3.org/1999/xhtml";const Gn={svg:"http://www.w3.org/2000/svg",xhtml:un,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Xe(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Gn.hasOwnProperty(e)?{space:Gn[e],local:t}:t}function cs(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===un&&e.documentElement.namespaceURI===un?e.createElement(t):e.createElementNS(n,t)}}function as(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Mr(t){var e=Xe(t);return(e.local?as:cs)(e)}function ls(){}function Sn(t){return t==null?ls:function(){return this.querySelector(t)}}function us(t){typeof t!="function"&&(t=Sn(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i=e[o],s=i.length,c=r[o]=new Array(s),a,u,l=0;l<s;++l)(a=i[l])&&(u=t.call(a,a.__data__,l,i))&&("__data__"in a&&(u.__data__=a.__data__),c[l]=u);return new dt(r,this._parents)}function fs(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ds(){return[]}function $r(t){return t==null?ds:function(){return this.querySelectorAll(t)}}function hs(t){return function(){return fs(t.apply(this,arguments))}}function gs(t){typeof t=="function"?t=hs(t):t=$r(t);for(var e=this._groups,n=e.length,r=[],o=[],i=0;i<n;++i)for(var s=e[i],c=s.length,a,u=0;u<c;++u)(a=s[u])&&(r.push(t.call(a,a.__data__,u,s)),o.push(a));return new dt(r,o)}function Tr(t){return function(){return this.matches(t)}}function kr(t){return function(e){return e.matches(t)}}var ms=Array.prototype.find;function ps(t){return function(){return ms.call(this.children,t)}}function ys(){return this.firstElementChild}function ws(t){return this.select(t==null?ys:ps(typeof t=="function"?t:kr(t)))}var vs=Array.prototype.filter;function xs(){return Array.from(this.children)}function _s(t){return function(){return vs.call(this.children,t)}}function Es(t){return this.selectAll(t==null?xs:_s(typeof t=="function"?t:kr(t)))}function Ss(t){typeof t!="function"&&(t=Tr(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i=e[o],s=i.length,c=r[o]=[],a,u=0;u<s;++u)(a=i[u])&&t.call(a,a.__data__,u,i)&&c.push(a);return new dt(r,this._parents)}function Ir(t){return new Array(t.length)}function bs(){return new dt(this._enter||this._groups.map(Ir),this._parents)}function Re(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Re.prototype={constructor:Re,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ns(t){return function(){return t}}function As(t,e,n,r,o,i){for(var s=0,c,a=e.length,u=i.length;s<u;++s)(c=e[s])?(c.__data__=i[s],r[s]=c):n[s]=new Re(t,i[s]);for(;s<a;++s)(c=e[s])&&(o[s]=c)}function Cs(t,e,n,r,o,i,s){var c,a,u=new Map,l=e.length,d=i.length,g=new Array(l),h;for(c=0;c<l;++c)(a=e[c])&&(g[c]=h=s.call(a,a.__data__,c,e)+"",u.has(h)?o[c]=a:u.set(h,a));for(c=0;c<d;++c)h=s.call(t,i[c],c,i)+"",(a=u.get(h))?(r[c]=a,a.__data__=i[c],u.delete(h)):n[c]=new Re(t,i[c]);for(c=0;c<l;++c)(a=e[c])&&u.get(g[c])===a&&(o[c]=a)}function Ms(t){return t.__data__}function $s(t,e){if(!arguments.length)return Array.from(this,Ms);var n=e?Cs:As,r=this._parents,o=this._groups;typeof t!="function"&&(t=Ns(t));for(var i=o.length,s=new Array(i),c=new Array(i),a=new Array(i),u=0;u<i;++u){var l=r[u],d=o[u],g=d.length,h=Ts(t.call(l,l&&l.__data__,u,r)),x=h.length,p=c[u]=new Array(x),_=s[u]=new Array(x),m=a[u]=new Array(g);n(l,d,p,_,m,h,e);for(var E=0,A=0,v,T;E<x;++E)if(v=p[E]){for(E>=A&&(A=E+1);!(T=_[A])&&++A<x;);v._next=T||null}}return s=new dt(s,r),s._enter=c,s._exit=a,s}function Ts(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ks(){return new dt(this._exit||this._groups.map(Ir),this._parents)}function Is(t,e,n){var r=this.enter(),o=this,i=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(o=e(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function zs(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,o=n.length,i=r.length,s=Math.min(o,i),c=new Array(o),a=0;a<s;++a)for(var u=n[a],l=r[a],d=u.length,g=c[a]=new Array(d),h,x=0;x<d;++x)(h=u[x]||l[x])&&(g[x]=h);for(;a<o;++a)c[a]=n[a];return new dt(c,this._parents)}function Ds(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],o=r.length-1,i=r[o],s;--o>=0;)(s=r[o])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function Rs(t){t||(t=Ps);function e(d,g){return d&&g?t(d.__data__,g.__data__):!d-!g}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s=n[i],c=s.length,a=o[i]=new Array(c),u,l=0;l<c;++l)(u=s[l])&&(a[l]=u);a.sort(e)}return new dt(o,this._parents).order()}function Ps(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Hs(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Bs(){return Array.from(this)}function Vs(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null}function Ls(){let t=0;for(const e of this)++t;return t}function Fs(){return!this.node()}function Os(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],i=0,s=o.length,c;i<s;++i)(c=o[i])&&t.call(c,c.__data__,i,o);return this}function Ys(t){return function(){this.removeAttribute(t)}}function Us(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Xs(t,e){return function(){this.setAttribute(t,e)}}function Ws(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Zs(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Gs(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ks(t,e){var n=Xe(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Us:Ys:typeof e=="function"?n.local?Gs:Zs:n.local?Ws:Xs)(n,e))}function zr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function qs(t){return function(){this.style.removeProperty(t)}}function Qs(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Js(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function js(t,e,n){return arguments.length>1?this.each((e==null?qs:typeof e=="function"?Js:Qs)(t,e,n??"")):re(this.node(),t)}function re(t,e){return t.style.getPropertyValue(e)||zr(t).getComputedStyle(t,null).getPropertyValue(e)}function tc(t){return function(){delete this[t]}}function ec(t,e){return function(){this[t]=e}}function nc(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function rc(t,e){return arguments.length>1?this.each((e==null?tc:typeof e=="function"?nc:ec)(t,e)):this.node()[t]}function Dr(t){return t.trim().split(/^|\s+/)}function bn(t){return t.classList||new Rr(t)}function Rr(t){this._node=t,this._names=Dr(t.getAttribute("class")||"")}Rr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Pr(t,e){for(var n=bn(t),r=-1,o=e.length;++r<o;)n.add(e[r])}function Hr(t,e){for(var n=bn(t),r=-1,o=e.length;++r<o;)n.remove(e[r])}function oc(t){return function(){Pr(this,t)}}function ic(t){return function(){Hr(this,t)}}function sc(t,e){return function(){(e.apply(this,arguments)?Pr:Hr)(this,t)}}function cc(t,e){var n=Dr(t+"");if(arguments.length<2){for(var r=bn(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof e=="function"?sc:e?oc:ic)(n,e))}function ac(){this.textContent=""}function lc(t){return function(){this.textContent=t}}function uc(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function fc(t){return arguments.length?this.each(t==null?ac:(typeof t=="function"?uc:lc)(t)):this.node().textContent}function dc(){this.innerHTML=""}function hc(t){return function(){this.innerHTML=t}}function gc(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function mc(t){return arguments.length?this.each(t==null?dc:(typeof t=="function"?gc:hc)(t)):this.node().innerHTML}function pc(){this.nextSibling&&this.parentNode.appendChild(this)}function yc(){return this.each(pc)}function wc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function vc(){return this.each(wc)}function xc(t){var e=typeof t=="function"?t:Mr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function _c(){return null}function Ec(t,e){var n=typeof t=="function"?t:Mr(t),r=e==null?_c:typeof e=="function"?e:Sn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Sc(){var t=this.parentNode;t&&t.removeChild(this)}function bc(){return this.each(Sc)}function Nc(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ac(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Cc(t){return this.select(t?Ac:Nc)}function Mc(t){return arguments.length?this.property("__data__",t):this.node().__data__}function $c(t){return function(e){t.call(this,e,this.__data__)}}function Tc(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function kc(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,o=e.length,i;n<o;++n)i=e[n],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++r]=i;++r?e.length=r:delete this.__on}}}function Ic(t,e,n){return function(){var r=this.__on,o,i=$c(e);if(r){for(var s=0,c=r.length;s<c;++s)if((o=r[s]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=e;return}}this.addEventListener(t.type,i,n),o={type:t.type,name:t.name,value:e,listener:i,options:n},r?r.push(o):this.__on=[o]}}function zc(t,e,n){var r=Tc(t+""),o,i=r.length,s;if(arguments.length<2){var c=this.node().__on;if(c){for(var a=0,u=c.length,l;a<u;++a)for(o=0,l=c[a];o<i;++o)if((s=r[o]).type===l.type&&s.name===l.name)return l.value}return}for(c=e?Ic:kc,o=0;o<i;++o)this.each(c(r[o],e,n));return this}function Br(t,e,n){var r=zr(t),o=r.CustomEvent;typeof o=="function"?o=new o(e,n):(o=r.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function Dc(t,e){return function(){return Br(this,t,e)}}function Rc(t,e){return function(){return Br(this,t,e.apply(this,arguments))}}function Pc(t,e){return this.each((typeof e=="function"?Rc:Dc)(t,e))}function*Hc(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],o=0,i=r.length,s;o<i;++o)(s=r[o])&&(yield s)}var Vr=[null];function dt(t,e){this._groups=t,this._parents=e}function Se(){return new dt([[document.documentElement]],Vr)}function Bc(){return this}dt.prototype=Se.prototype={constructor:dt,select:us,selectAll:gs,selectChild:ws,selectChildren:Es,filter:Ss,data:$s,enter:bs,exit:ks,join:Is,merge:zs,selection:Bc,order:Ds,sort:Rs,call:Hs,nodes:Bs,node:Vs,size:Ls,empty:Fs,each:Os,attr:Ks,style:js,property:rc,classed:cc,text:fc,html:mc,raise:yc,lower:vc,append:xc,insert:Ec,remove:bc,clone:Cc,datum:Mc,on:zc,dispatch:Pc,[Symbol.iterator]:Hc};function ht(t){return typeof t=="string"?new dt([[document.querySelector(t)]],[document.documentElement]):new dt([[t]],Vr)}function Vc(t){let e;for(;e=t.sourceEvent;)t=e;return t}function pt(t,e){if(t=Vc(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}const Lc={passive:!1},we={capture:!0,passive:!1};function en(t){t.stopImmediatePropagation()}function te(t){t.preventDefault(),t.stopImmediatePropagation()}function Lr(t){var e=t.document.documentElement,n=ht(t).on("dragstart.drag",te,we);"onselectstart"in e?n.on("selectstart.drag",te,we):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Fr(t,e){var n=t.document.documentElement,r=ht(t).on("dragstart.drag",null);e&&(r.on("click.drag",te,we),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ne=t=>()=>t;function fn(t,{sourceEvent:e,subject:n,target:r,identifier:o,active:i,x:s,y:c,dx:a,dy:u,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:l}})}fn.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Fc(t){return!t.ctrlKey&&!t.button}function Oc(){return this.parentNode}function Yc(t,e){return e??{x:t.x,y:t.y}}function Uc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xc(){var t=Fc,e=Oc,n=Yc,r=Uc,o={},i=Ue("start","drag","end"),s=0,c,a,u,l,d=0;function g(v){v.on("mousedown.drag",h).filter(r).on("touchstart.drag",_).on("touchmove.drag",m,Lc).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(v,T){if(!(l||!t.call(this,v,T))){var k=A(this,e.call(this,v,T),v,T,"mouse");k&&(ht(v.view).on("mousemove.drag",x,we).on("mouseup.drag",p,we),Lr(v.view),en(v),u=!1,c=v.clientX,a=v.clientY,k("start",v))}}function x(v){if(te(v),!u){var T=v.clientX-c,k=v.clientY-a;u=T*T+k*k>d}o.mouse("drag",v)}function p(v){ht(v.view).on("mousemove.drag mouseup.drag",null),Fr(v.view,u),te(v),o.mouse("end",v)}function _(v,T){if(t.call(this,v,T)){var k=v.changedTouches,P=e.call(this,v,T),V=k.length,$,B;for($=0;$<V;++$)(B=A(this,P,v,T,k[$].identifier,k[$]))&&(en(v),B("start",v,k[$]))}}function m(v){var T=v.changedTouches,k=T.length,P,V;for(P=0;P<k;++P)(V=o[T[P].identifier])&&(te(v),V("drag",v,T[P]))}function E(v){var T=v.changedTouches,k=T.length,P,V;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),P=0;P<k;++P)(V=o[T[P].identifier])&&(en(v),V("end",v,T[P]))}function A(v,T,k,P,V,$){var B=i.copy(),R=pt($||k,T),L,H,f;if((f=n.call(v,new fn("beforestart",{sourceEvent:k,target:g,identifier:V,active:s,x:R[0],y:R[1],dx:0,dy:0,dispatch:B}),P))!=null)return L=f.x-R[0]||0,H=f.y-R[1]||0,function S(y,M,I){var w=R,C;switch(y){case"start":o[V]=S,C=s++;break;case"end":delete o[V],--s;case"drag":R=pt(I||M,T),C=s;break}B.call(y,v,new fn(y,{sourceEvent:M,subject:f,target:g,identifier:V,active:C,x:R[0]+L,y:R[1]+H,dx:R[0]-w[0],dy:R[1]-w[1],dispatch:B}),P)}}return g.filter=function(v){return arguments.length?(t=typeof v=="function"?v:Ne(!!v),g):t},g.container=function(v){return arguments.length?(e=typeof v=="function"?v:Ne(v),g):e},g.subject=function(v){return arguments.length?(n=typeof v=="function"?v:Ne(v),g):n},g.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:Ne(!!v),g):r},g.on=function(){var v=i.on.apply(i,arguments);return v===i?g:v},g.clickDistance=function(v){return arguments.length?(d=(v=+v)*v,g):Math.sqrt(d)},g}var oe=0,me=0,ue=0,Or=1e3,Pe,pe,He=0,Ot=0,We=0,ve=typeof performance=="object"&&performance.now?performance:Date,Yr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Nn(){return Ot||(Yr(Wc),Ot=ve.now()+We)}function Wc(){Ot=0}function Be(){this._call=this._time=this._next=null}Be.prototype=Ur.prototype={constructor:Be,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Nn():+n)+(e==null?0:+e),!this._next&&pe!==this&&(pe?pe._next=this:Pe=this,pe=this),this._call=t,this._time=n,dn()},stop:function(){this._call&&(this._call=null,this._time=1/0,dn())}};function Ur(t,e,n){var r=new Be;return r.restart(t,e,n),r}function Zc(){Nn(),++oe;for(var t=Pe,e;t;)(e=Ot-t._time)>=0&&t._call.call(void 0,e),t=t._next;--oe}function Kn(){Ot=(He=ve.now())+We,oe=me=0;try{Zc()}finally{oe=0,Kc(),Ot=0}}function Gc(){var t=ve.now(),e=t-He;e>Or&&(We-=e,He=t)}function Kc(){for(var t,e=Pe,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Pe=n);pe=t,dn(r)}function dn(t){if(!oe){me&&(me=clearTimeout(me));var e=t-Ot;e>24?(t<1/0&&(me=setTimeout(Kn,t-ve.now()-We)),ue&&(ue=clearInterval(ue))):(ue||(He=ve.now(),ue=setInterval(Gc,Or)),oe=1,Yr(Kn))}}function qn(t,e,n){var r=new Be;return e=e==null?0:+e,r.restart(o=>{r.stop(),t(o+e)},e,n),r}var qc=Ue("start","end","cancel","interrupt"),Qc=[],Xr=0,Qn=1,hn=2,Ie=3,Jn=4,gn=5,ze=6;function Ze(t,e,n,r,o,i){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Jc(t,n,{name:e,index:r,group:o,on:qc,tween:Qc,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Xr})}function An(t,e){var n=wt(t,e);if(n.state>Xr)throw new Error("too late; already scheduled");return n}function xt(t,e){var n=wt(t,e);if(n.state>Ie)throw new Error("too late; already running");return n}function wt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Jc(t,e,n){var r=t.__transition,o;r[e]=n,n.timer=Ur(i,0,n.time);function i(u){n.state=Qn,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var l,d,g,h;if(n.state!==Qn)return a();for(l in r)if(h=r[l],h.name===n.name){if(h.state===Ie)return qn(s);h.state===Jn?(h.state=ze,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete r[l]):+l<e&&(h.state=ze,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete r[l])}if(qn(function(){n.state===Ie&&(n.state=Jn,n.timer.restart(c,n.delay,n.time),c(u))}),n.state=hn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===hn){for(n.state=Ie,o=new Array(g=n.tween.length),l=0,d=-1;l<g;++l)(h=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(o[++d]=h);o.length=d+1}}function c(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(a),n.state=gn,1),d=-1,g=o.length;++d<g;)o[d].call(t,l);n.state===gn&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){n.state=ze,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function De(t,e){var n=t.__transition,r,o,i=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){i=!1;continue}o=r.state>hn&&r.state<gn,r.state=ze,r.timer.stop(),r.on.call(o?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}i&&delete t.__transition}}function jc(t){return this.each(function(){De(this,t)})}function ta(t,e){var n,r;return function(){var o=xt(this,t),i=o.tween;if(i!==n){r=n=i;for(var s=0,c=r.length;s<c;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function ea(t,e,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=xt(this,t),s=i.tween;if(s!==r){o=(r=s).slice();for(var c={name:e,value:n},a=0,u=o.length;a<u;++a)if(o[a].name===e){o[a]=c;break}a===u&&o.push(c)}i.tween=o}}function na(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=wt(this.node(),n).tween,o=0,i=r.length,s;o<i;++o)if((s=r[o]).name===t)return s.value;return null}return this.each((e==null?ta:ea)(n,t,e))}function Cn(t,e,n){var r=t._id;return t.each(function(){var o=xt(this,r);(o.value||(o.value={}))[e]=n.apply(this,arguments)}),function(o){return wt(o,r).value[e]}}function Wr(t,e){var n;return(typeof e=="number"?Ci:e instanceof Un?Yn:(n=Un(e))?(e=n,Yn):Mi)(t,e)}function ra(t){return function(){this.removeAttribute(t)}}function oa(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ia(t,e,n){var r,o=n+"",i;return function(){var s=this.getAttribute(t);return s===o?null:s===r?i:i=e(r=s,n)}}function sa(t,e,n){var r,o=n+"",i;return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===r?i:i=e(r=s,n)}}function ca(t,e,n){var r,o,i;return function(){var s,c=n(this),a;return c==null?void this.removeAttribute(t):(s=this.getAttribute(t),a=c+"",s===a?null:s===r&&a===o?i:(o=a,i=e(r=s,c)))}}function aa(t,e,n){var r,o,i;return function(){var s,c=n(this),a;return c==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),a=c+"",s===a?null:s===r&&a===o?i:(o=a,i=e(r=s,c)))}}function la(t,e){var n=Xe(t),r=n==="transform"?$i:Wr;return this.attrTween(t,typeof e=="function"?(n.local?aa:ca)(n,r,Cn(this,"attr."+t,e)):e==null?(n.local?oa:ra)(n):(n.local?sa:ia)(n,r,e))}function ua(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function fa(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function da(t,e){var n,r;function o(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&fa(t,i)),n}return o._value=e,o}function ha(t,e){var n,r;function o(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&ua(t,i)),n}return o._value=e,o}function ga(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Xe(t);return this.tween(n,(r.local?da:ha)(r,e))}function ma(t,e){return function(){An(this,t).delay=+e.apply(this,arguments)}}function pa(t,e){return e=+e,function(){An(this,t).delay=e}}function ya(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ma:pa)(e,t)):wt(this.node(),e).delay}function wa(t,e){return function(){xt(this,t).duration=+e.apply(this,arguments)}}function va(t,e){return e=+e,function(){xt(this,t).duration=e}}function xa(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?wa:va)(e,t)):wt(this.node(),e).duration}function _a(t,e){if(typeof e!="function")throw new Error;return function(){xt(this,t).ease=e}}function Ea(t){var e=this._id;return arguments.length?this.each(_a(e,t)):wt(this.node(),e).ease}function Sa(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;xt(this,t).ease=n}}function ba(t){if(typeof t!="function")throw new Error;return this.each(Sa(this._id,t))}function Na(t){typeof t!="function"&&(t=Tr(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i=e[o],s=i.length,c=r[o]=[],a,u=0;u<s;++u)(a=i[u])&&t.call(a,a.__data__,u,i)&&c.push(a);return new Ct(r,this._parents,this._name,this._id)}function Aa(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,o=n.length,i=Math.min(r,o),s=new Array(r),c=0;c<i;++c)for(var a=e[c],u=n[c],l=a.length,d=s[c]=new Array(l),g,h=0;h<l;++h)(g=a[h]||u[h])&&(d[h]=g);for(;c<r;++c)s[c]=e[c];return new Ct(s,this._parents,this._name,this._id)}function Ca(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ma(t,e,n){var r,o,i=Ca(e)?An:xt;return function(){var s=i(this,t),c=s.on;c!==r&&(o=(r=c).copy()).on(e,n),s.on=o}}function $a(t,e){var n=this._id;return arguments.length<2?wt(this.node(),n).on.on(t):this.each(Ma(n,t,e))}function Ta(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function ka(){return this.on("end.remove",Ta(this._id))}function Ia(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Sn(t));for(var r=this._groups,o=r.length,i=new Array(o),s=0;s<o;++s)for(var c=r[s],a=c.length,u=i[s]=new Array(a),l,d,g=0;g<a;++g)(l=c[g])&&(d=t.call(l,l.__data__,g,c))&&("__data__"in l&&(d.__data__=l.__data__),u[g]=d,Ze(u[g],e,n,g,u,wt(l,n)));return new Ct(i,this._parents,e,n)}function za(t){var e=this._name,n=this._id;typeof t!="function"&&(t=$r(t));for(var r=this._groups,o=r.length,i=[],s=[],c=0;c<o;++c)for(var a=r[c],u=a.length,l,d=0;d<u;++d)if(l=a[d]){for(var g=t.call(l,l.__data__,d,a),h,x=wt(l,n),p=0,_=g.length;p<_;++p)(h=g[p])&&Ze(h,e,n,p,g,x);i.push(g),s.push(l)}return new Ct(i,s,e,n)}var Da=Se.prototype.constructor;function Ra(){return new Da(this._groups,this._parents)}function Pa(t,e){var n,r,o;return function(){var i=re(this,t),s=(this.style.removeProperty(t),re(this,t));return i===s?null:i===n&&s===r?o:o=e(n=i,r=s)}}function Zr(t){return function(){this.style.removeProperty(t)}}function Ha(t,e,n){var r,o=n+"",i;return function(){var s=re(this,t);return s===o?null:s===r?i:i=e(r=s,n)}}function Ba(t,e,n){var r,o,i;return function(){var s=re(this,t),c=n(this),a=c+"";return c==null&&(a=c=(this.style.removeProperty(t),re(this,t))),s===a?null:s===r&&a===o?i:(o=a,i=e(r=s,c))}}function Va(t,e){var n,r,o,i="style."+e,s="end."+i,c;return function(){var a=xt(this,t),u=a.on,l=a.value[i]==null?c||(c=Zr(e)):void 0;(u!==n||o!==l)&&(r=(n=u).copy()).on(s,o=l),a.on=r}}function La(t,e,n){var r=(t+="")=="transform"?Ti:Wr;return e==null?this.styleTween(t,Pa(t,r)).on("end.style."+t,Zr(t)):typeof e=="function"?this.styleTween(t,Ba(t,r,Cn(this,"style."+t,e))).each(Va(this._id,t)):this.styleTween(t,Ha(t,r,e),n).on("end.style."+t,null)}function Fa(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Oa(t,e,n){var r,o;function i(){var s=e.apply(this,arguments);return s!==o&&(r=(o=s)&&Fa(t,s,n)),r}return i._value=e,i}function Ya(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Oa(t,e,n??""))}function Ua(t){return function(){this.textContent=t}}function Xa(t){return function(){var e=t(this);this.textContent=e??""}}function Wa(t){return this.tween("text",typeof t=="function"?Xa(Cn(this,"text",t)):Ua(t==null?"":t+""))}function Za(t){return function(e){this.textContent=t.call(this,e)}}function Ga(t){var e,n;function r(){var o=t.apply(this,arguments);return o!==n&&(e=(n=o)&&Za(o)),e}return r._value=t,r}function Ka(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Ga(t))}function qa(){for(var t=this._name,e=this._id,n=Gr(),r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],c=s.length,a,u=0;u<c;++u)if(a=s[u]){var l=wt(a,e);Ze(a,t,n,u,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Ct(r,this._parents,t,n)}function Qa(){var t,e,n=this,r=n._id,o=n.size();return new Promise(function(i,s){var c={value:s},a={value:function(){--o===0&&i()}};n.each(function(){var u=xt(this,r),l=u.on;l!==t&&(e=(t=l).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(a)),u.on=e}),o===0&&i()})}var Ja=0;function Ct(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Gr(){return++Ja}var bt=Se.prototype;Ct.prototype={constructor:Ct,select:Ia,selectAll:za,selectChild:bt.selectChild,selectChildren:bt.selectChildren,filter:Na,merge:Aa,selection:Ra,transition:qa,call:bt.call,nodes:bt.nodes,node:bt.node,size:bt.size,empty:bt.empty,each:bt.each,on:$a,attr:la,attrTween:ga,style:La,styleTween:Ya,text:Wa,textTween:Ka,remove:ka,tween:na,delay:ya,duration:xa,ease:Ea,easeVarying:ba,end:Qa,[Symbol.iterator]:bt[Symbol.iterator]};function ja(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var tl={time:null,delay:0,duration:250,ease:ja};function el(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function nl(t){var e,n;t instanceof Ct?(e=t._id,t=t._name):(e=Gr(),(n=tl).time=Nn(),t=t==null?null:t+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],c=s.length,a,u=0;u<c;++u)(a=s[u])&&Ze(a,t,e,u,s,n||el(a,e));return new Ct(r,this._parents,t,e)}Se.prototype.interrupt=jc;Se.prototype.transition=nl;const Ae=t=>()=>t;function rl(t,{sourceEvent:e,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Nt(t,e,n){this.k=t,this.x=e,this.y=n}Nt.prototype={constructor:Nt,scale:function(t){return t===1?this:new Nt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Nt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var At=new Nt(1,0,0);Nt.prototype;function nn(t){t.stopImmediatePropagation()}function fe(t){t.preventDefault(),t.stopImmediatePropagation()}function ol(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function il(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function jn(){return this.__zoom||At}function sl(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function cl(){return navigator.maxTouchPoints||"ontouchstart"in this}function al(t,e,n){var r=t.invertX(e[0][0])-n[0][0],o=t.invertX(e[1][0])-n[1][0],i=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function Kr(){var t=ol,e=il,n=al,r=sl,o=cl,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],c=250,a=ki,u=Ue("start","zoom","end"),l,d,g,h=500,x=150,p=0,_=10;function m(f){f.property("__zoom",jn).on("wheel.zoom",V,{passive:!1}).on("mousedown.zoom",$).on("dblclick.zoom",B).filter(o).on("touchstart.zoom",R).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",H).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(f,S,y,M){var I=f.selection?f.selection():f;I.property("__zoom",jn),f!==I?T(f,S,y,M):I.interrupt().each(function(){k(this,arguments).event(M).start().zoom(null,typeof S=="function"?S.apply(this,arguments):S).end()})},m.scaleBy=function(f,S,y,M){m.scaleTo(f,function(){var I=this.__zoom.k,w=typeof S=="function"?S.apply(this,arguments):S;return I*w},y,M)},m.scaleTo=function(f,S,y,M){m.transform(f,function(){var I=e.apply(this,arguments),w=this.__zoom,C=y==null?v(I):typeof y=="function"?y.apply(this,arguments):y,z=w.invert(C),D=typeof S=="function"?S.apply(this,arguments):S;return n(A(E(w,D),C,z),I,s)},y,M)},m.translateBy=function(f,S,y,M){m.transform(f,function(){return n(this.__zoom.translate(typeof S=="function"?S.apply(this,arguments):S,typeof y=="function"?y.apply(this,arguments):y),e.apply(this,arguments),s)},null,M)},m.translateTo=function(f,S,y,M,I){m.transform(f,function(){var w=e.apply(this,arguments),C=this.__zoom,z=M==null?v(w):typeof M=="function"?M.apply(this,arguments):M;return n(At.translate(z[0],z[1]).scale(C.k).translate(typeof S=="function"?-S.apply(this,arguments):-S,typeof y=="function"?-y.apply(this,arguments):-y),w,s)},M,I)};function E(f,S){return S=Math.max(i[0],Math.min(i[1],S)),S===f.k?f:new Nt(S,f.x,f.y)}function A(f,S,y){var M=S[0]-y[0]*f.k,I=S[1]-y[1]*f.k;return M===f.x&&I===f.y?f:new Nt(f.k,M,I)}function v(f){return[(+f[0][0]+ +f[1][0])/2,(+f[0][1]+ +f[1][1])/2]}function T(f,S,y,M){f.on("start.zoom",function(){k(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(M).end()}).tween("zoom",function(){var I=this,w=arguments,C=k(I,w).event(M),z=e.apply(I,w),D=y==null?v(z):typeof y=="function"?y.apply(I,w):y,O=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),F=I.__zoom,X=typeof S=="function"?S.apply(I,w):S,W=a(F.invert(D).concat(O/F.k),X.invert(D).concat(O/X.k));return function(G){if(G===1)G=X;else{var Q=W(G),q=O/Q[2];G=new Nt(q,D[0]-Q[0]*q,D[1]-Q[1]*q)}C.zoom(null,G)}})}function k(f,S,y){return!y&&f.__zooming||new P(f,S)}function P(f,S){this.that=f,this.args=S,this.active=0,this.sourceEvent=null,this.extent=e.apply(f,S),this.taps=0}P.prototype={event:function(f){return f&&(this.sourceEvent=f),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(f,S){return this.mouse&&f!=="mouse"&&(this.mouse[1]=S.invert(this.mouse[0])),this.touch0&&f!=="touch"&&(this.touch0[1]=S.invert(this.touch0[0])),this.touch1&&f!=="touch"&&(this.touch1[1]=S.invert(this.touch1[0])),this.that.__zoom=S,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(f){var S=ht(this.that).datum();u.call(f,this.that,new rl(f,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:u}),S)}};function V(f,...S){if(!t.apply(this,arguments))return;var y=k(this,S).event(f),M=this.__zoom,I=Math.max(i[0],Math.min(i[1],M.k*Math.pow(2,r.apply(this,arguments)))),w=pt(f);if(y.wheel)(y.mouse[0][0]!==w[0]||y.mouse[0][1]!==w[1])&&(y.mouse[1]=M.invert(y.mouse[0]=w)),clearTimeout(y.wheel);else{if(M.k===I)return;y.mouse=[w,M.invert(w)],De(this),y.start()}fe(f),y.wheel=setTimeout(C,x),y.zoom("mouse",n(A(E(M,I),y.mouse[0],y.mouse[1]),y.extent,s));function C(){y.wheel=null,y.end()}}function $(f,...S){if(g||!t.apply(this,arguments))return;var y=f.currentTarget,M=k(this,S,!0).event(f),I=ht(f.view).on("mousemove.zoom",D,!0).on("mouseup.zoom",O,!0),w=pt(f,y),C=f.clientX,z=f.clientY;Lr(f.view),nn(f),M.mouse=[w,this.__zoom.invert(w)],De(this),M.start();function D(F){if(fe(F),!M.moved){var X=F.clientX-C,W=F.clientY-z;M.moved=X*X+W*W>p}M.event(F).zoom("mouse",n(A(M.that.__zoom,M.mouse[0]=pt(F,y),M.mouse[1]),M.extent,s))}function O(F){I.on("mousemove.zoom mouseup.zoom",null),Fr(F.view,M.moved),fe(F),M.event(F).end()}}function B(f,...S){if(t.apply(this,arguments)){var y=this.__zoom,M=pt(f.changedTouches?f.changedTouches[0]:f,this),I=y.invert(M),w=y.k*(f.shiftKey?.5:2),C=n(A(E(y,w),M,I),e.apply(this,S),s);fe(f),c>0?ht(this).transition().duration(c).call(T,C,M,f):ht(this).call(m.transform,C,M,f)}}function R(f,...S){if(t.apply(this,arguments)){var y=f.touches,M=y.length,I=k(this,S,f.changedTouches.length===M).event(f),w,C,z,D;for(nn(f),C=0;C<M;++C)z=y[C],D=pt(z,this),D=[D,this.__zoom.invert(D),z.identifier],I.touch0?!I.touch1&&I.touch0[2]!==D[2]&&(I.touch1=D,I.taps=0):(I.touch0=D,w=!0,I.taps=1+!!l);l&&(l=clearTimeout(l)),w&&(I.taps<2&&(d=D[0],l=setTimeout(function(){l=null},h)),De(this),I.start())}}function L(f,...S){if(this.__zooming){var y=k(this,S).event(f),M=f.changedTouches,I=M.length,w,C,z,D;for(fe(f),w=0;w<I;++w)C=M[w],z=pt(C,this),y.touch0&&y.touch0[2]===C.identifier?y.touch0[0]=z:y.touch1&&y.touch1[2]===C.identifier&&(y.touch1[0]=z);if(C=y.that.__zoom,y.touch1){var O=y.touch0[0],F=y.touch0[1],X=y.touch1[0],W=y.touch1[1],G=(G=X[0]-O[0])*G+(G=X[1]-O[1])*G,Q=(Q=W[0]-F[0])*Q+(Q=W[1]-F[1])*Q;C=E(C,Math.sqrt(G/Q)),z=[(O[0]+X[0])/2,(O[1]+X[1])/2],D=[(F[0]+W[0])/2,(F[1]+W[1])/2]}else if(y.touch0)z=y.touch0[0],D=y.touch0[1];else return;y.zoom("touch",n(A(C,z,D),y.extent,s))}}function H(f,...S){if(this.__zooming){var y=k(this,S).event(f),M=f.changedTouches,I=M.length,w,C;for(nn(f),g&&clearTimeout(g),g=setTimeout(function(){g=null},h),w=0;w<I;++w)C=M[w],y.touch0&&y.touch0[2]===C.identifier?delete y.touch0:y.touch1&&y.touch1[2]===C.identifier&&delete y.touch1;if(y.touch1&&!y.touch0&&(y.touch0=y.touch1,delete y.touch1),y.touch0)y.touch0[1]=this.__zoom.invert(y.touch0[0]);else if(y.end(),y.taps===2&&(C=pt(C,this),Math.hypot(d[0]-C[0],d[1]-C[1])<_)){var z=ht(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return m.wheelDelta=function(f){return arguments.length?(r=typeof f=="function"?f:Ae(+f),m):r},m.filter=function(f){return arguments.length?(t=typeof f=="function"?f:Ae(!!f),m):t},m.touchable=function(f){return arguments.length?(o=typeof f=="function"?f:Ae(!!f),m):o},m.extent=function(f){return arguments.length?(e=typeof f=="function"?f:Ae([[+f[0][0],+f[0][1]],[+f[1][0],+f[1][1]]]),m):e},m.scaleExtent=function(f){return arguments.length?(i[0]=+f[0],i[1]=+f[1],m):[i[0],i[1]]},m.translateExtent=function(f){return arguments.length?(s[0][0]=+f[0][0],s[1][0]=+f[1][0],s[0][1]=+f[0][1],s[1][1]=+f[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(f){return arguments.length?(n=f,m):n},m.duration=function(f){return arguments.length?(c=+f,m):c},m.interpolate=function(f){return arguments.length?(a=f,m):a},m.on=function(){var f=u.on.apply(u,arguments);return f===u?m:f},m.clickDistance=function(f){return arguments.length?(p=(f=+f)*f,m):Math.sqrt(p)},m.tapDistance=function(f){return arguments.length?(_=+f,m):_},m}const Ge=b.createContext(null),ll=Ge.Provider,Mt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},qr=Mt.error001();function j(t,e){const n=b.useContext(Ge);if(n===null)throw new Error(qr);return Cr(n,t,e)}const rt=()=>{const t=b.useContext(Ge);if(t===null)throw new Error(qr);return b.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},ul=t=>t.userSelectionActive?"none":"all";function Mn({position:t,children:e,className:n,style:r,...o}){const i=j(ul),s=`${t}`.split("-");return N.createElement("div",{className:st(["react-flow__panel",n,...s]),style:{...r,pointerEvents:i},...o},e)}function fl({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:N.createElement(Mn,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},N.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const dl=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:i={},labelBgPadding:s=[2,4],labelBgBorderRadius:c=2,children:a,className:u,...l})=>{const d=b.useRef(null),[g,h]=b.useState({x:0,y:0,width:0,height:0}),x=st(["react-flow__edge-textwrapper",u]);return b.useEffect(()=>{if(d.current){const p=d.current.getBBox();h({x:p.x,y:p.y,width:p.width,height:p.height})}},[n]),typeof n>"u"||!n?null:N.createElement("g",{transform:`translate(${t-g.width/2} ${e-g.height/2})`,className:x,visibility:g.width?"visible":"hidden",...l},o&&N.createElement("rect",{width:g.width+2*s[0],x:-s[0],y:-s[1],height:g.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:c,ry:c}),N.createElement("text",{className:"react-flow__edge-text",y:g.height/2,dy:"0.3em",ref:d,style:r},n),a)};var hl=b.memo(dl);const $n=t=>({width:t.offsetWidth,height:t.offsetHeight}),ie=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Tn=(t={x:0,y:0},e)=>({x:ie(t.x,e[0][0],e[1][0]),y:ie(t.y,e[0][1],e[1][1])}),tr=(t,e,n)=>t<e?ie(Math.abs(t-e),1,50)/50:t>n?-ie(Math.abs(t-n),1,50)/50:0,Qr=(t,e)=>{const n=tr(t.x,35,e.width-35)*20,r=tr(t.y,35,e.height-35)*20;return[n,r]},Jr=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},jr=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),xe=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),to=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),er=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),gl=(t,e)=>to(jr(xe(t),xe(e))),mn=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},ml=t=>gt(t.width)&&gt(t.height)&&gt(t.x)&&gt(t.y),gt=t=>!isNaN(t)&&isFinite(t),tt=Symbol.for("internals"),eo=["Enter"," ","Escape"],pl=(t,e)=>{},yl=t=>"nativeEvent"in t;function pn(t){var o,i;const e=yl(t)?t.nativeEvent:t,n=((i=(o=e.composedPath)==null?void 0:o.call(e))==null?void 0:i[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const no=t=>"clientX"in t,It=(t,e)=>{var i,s;const n=no(t),r=n?t.clientX:(i=t.touches)==null?void 0:i[0].clientX,o=n?t.clientY:(s=t.touches)==null?void 0:s[0].clientY;return{x:r-((e==null?void 0:e.left)??0),y:o-((e==null?void 0:e.top)??0)}},Ve=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},be=({id:t,path:e,labelX:n,labelY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:c,labelBgPadding:a,labelBgBorderRadius:u,style:l,markerEnd:d,markerStart:g,interactionWidth:h=20})=>N.createElement(N.Fragment,null,N.createElement("path",{id:t,style:l,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:g}),h&&N.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),o&&gt(n)&&gt(r)?N.createElement(hl,{x:n,y:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:c,labelBgPadding:a,labelBgBorderRadius:u}):null);be.displayName="BaseEdge";function de(t,e,n){return n===void 0?n:r=>{const o=e().edges.find(i=>i.id===t);o&&n(r,{...o})}}function ro({sourceX:t,sourceY:e,targetX:n,targetY:r}){const o=Math.abs(n-t)/2,i=n<t?n+o:n-o,s=Math.abs(r-e)/2,c=r<e?r+s:r-s;return[i,c,o,s]}function oo({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:s,targetControlY:c}){const a=t*.125+o*.375+s*.375+n*.125,u=e*.125+i*.375+c*.375+r*.125,l=Math.abs(a-t),d=Math.abs(u-e);return[a,u,l,d]}var Yt;(function(t){t.Strict="strict",t.Loose="loose"})(Yt||(Yt={}));var Lt;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Lt||(Lt={}));var _e;(function(t){t.Partial="partial",t.Full="full"})(_e||(_e={}));var kt;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(kt||(kt={}));var Le;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Le||(Le={}));var U;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(U||(U={}));function nr({pos:t,x1:e,y1:n,x2:r,y2:o}){return t===U.Left||t===U.Right?[.5*(e+r),n]:[e,.5*(n+o)]}function io({sourceX:t,sourceY:e,sourcePosition:n=U.Bottom,targetX:r,targetY:o,targetPosition:i=U.Top}){const[s,c]=nr({pos:n,x1:t,y1:e,x2:r,y2:o}),[a,u]=nr({pos:i,x1:r,y1:o,x2:t,y2:e}),[l,d,g,h]=oo({sourceX:t,sourceY:e,targetX:r,targetY:o,sourceControlX:s,sourceControlY:c,targetControlX:a,targetControlY:u});return[`M${t},${e} C${s},${c} ${a},${u} ${r},${o}`,l,d,g,h]}const kn=b.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:o=U.Bottom,targetPosition:i=U.Top,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:g,markerEnd:h,markerStart:x,interactionWidth:p})=>{const[_,m,E]=io({sourceX:t,sourceY:e,sourcePosition:o,targetX:n,targetY:r,targetPosition:i});return N.createElement(be,{path:_,labelX:m,labelY:E,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:g,markerEnd:h,markerStart:x,interactionWidth:p})});kn.displayName="SimpleBezierEdge";const rr={[U.Left]:{x:-1,y:0},[U.Right]:{x:1,y:0},[U.Top]:{x:0,y:-1},[U.Bottom]:{x:0,y:1}},wl=({source:t,sourcePosition:e=U.Bottom,target:n})=>e===U.Left||e===U.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},or=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function vl({source:t,sourcePosition:e=U.Bottom,target:n,targetPosition:r=U.Top,center:o,offset:i}){const s=rr[e],c=rr[r],a={x:t.x+s.x*i,y:t.y+s.y*i},u={x:n.x+c.x*i,y:n.y+c.y*i},l=wl({source:a,sourcePosition:e,target:u}),d=l.x!==0?"x":"y",g=l[d];let h=[],x,p;const _={x:0,y:0},m={x:0,y:0},[E,A,v,T]=ro({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(s[d]*c[d]===-1){x=o.x??E,p=o.y??A;const P=[{x,y:a.y},{x,y:u.y}],V=[{x:a.x,y:p},{x:u.x,y:p}];s[d]===g?h=d==="x"?P:V:h=d==="x"?V:P}else{const P=[{x:a.x,y:u.y}],V=[{x:u.x,y:a.y}];if(d==="x"?h=s.x===g?V:P:h=s.y===g?P:V,e===r){const H=Math.abs(t[d]-n[d]);if(H<=i){const f=Math.min(i-1,i-H);s[d]===g?_[d]=(a[d]>t[d]?-1:1)*f:m[d]=(u[d]>n[d]?-1:1)*f}}if(e!==r){const H=d==="x"?"y":"x",f=s[d]===c[H],S=a[H]>u[H],y=a[H]<u[H];(s[d]===1&&(!f&&S||f&&y)||s[d]!==1&&(!f&&y||f&&S))&&(h=d==="x"?P:V)}const $={x:a.x+_.x,y:a.y+_.y},B={x:u.x+m.x,y:u.y+m.y},R=Math.max(Math.abs($.x-h[0].x),Math.abs(B.x-h[0].x)),L=Math.max(Math.abs($.y-h[0].y),Math.abs(B.y-h[0].y));R>=L?(x=($.x+B.x)/2,p=h[0].y):(x=h[0].x,p=($.y+B.y)/2)}return[[t,{x:a.x+_.x,y:a.y+_.y},...h,{x:u.x+m.x,y:u.y+m.y},n],x,p,v,T]}function xl(t,e,n,r){const o=Math.min(or(t,e)/2,or(e,n)/2,r),{x:i,y:s}=e;if(t.x===i&&i===n.x||t.y===s&&s===n.y)return`L${i} ${s}`;if(t.y===s){const u=t.x<n.x?-1:1,l=t.y<n.y?1:-1;return`L ${i+o*u},${s}Q ${i},${s} ${i},${s+o*l}`}const c=t.x<n.x?1:-1,a=t.y<n.y?-1:1;return`L ${i},${s+o*a}Q ${i},${s} ${i+o*c},${s}`}function yn({sourceX:t,sourceY:e,sourcePosition:n=U.Bottom,targetX:r,targetY:o,targetPosition:i=U.Top,borderRadius:s=5,centerX:c,centerY:a,offset:u=20}){const[l,d,g,h,x]=vl({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:c,y:a},offset:u});return[l.reduce((_,m,E)=>{let A="";return E>0&&E<l.length-1?A=xl(l[E-1],m,l[E+1],s):A=`${E===0?"M":"L"}${m.x} ${m.y}`,_+=A,_},""),d,g,h,x]}const Ke=b.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:c,labelBgPadding:a,labelBgBorderRadius:u,style:l,sourcePosition:d=U.Bottom,targetPosition:g=U.Top,markerEnd:h,markerStart:x,pathOptions:p,interactionWidth:_})=>{const[m,E,A]=yn({sourceX:t,sourceY:e,sourcePosition:d,targetX:n,targetY:r,targetPosition:g,borderRadius:p==null?void 0:p.borderRadius,offset:p==null?void 0:p.offset});return N.createElement(be,{path:m,labelX:E,labelY:A,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:c,labelBgPadding:a,labelBgBorderRadius:u,style:l,markerEnd:h,markerStart:x,interactionWidth:_})});Ke.displayName="SmoothStepEdge";const In=b.memo(t=>{var e;return N.createElement(Ke,{...t,pathOptions:b.useMemo(()=>{var n;return{borderRadius:0,offset:(n=t.pathOptions)==null?void 0:n.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});In.displayName="StepEdge";function _l({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[o,i,s,c]=ro({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,o,i,s,c]}const zn=b.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:c,labelBgPadding:a,labelBgBorderRadius:u,style:l,markerEnd:d,markerStart:g,interactionWidth:h})=>{const[x,p,_]=_l({sourceX:t,sourceY:e,targetX:n,targetY:r});return N.createElement(be,{path:x,labelX:p,labelY:_,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:c,labelBgPadding:a,labelBgBorderRadius:u,style:l,markerEnd:d,markerStart:g,interactionWidth:h})});zn.displayName="StraightEdge";function Ce(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function ir({pos:t,x1:e,y1:n,x2:r,y2:o,c:i}){switch(t){case U.Left:return[e-Ce(e-r,i),n];case U.Right:return[e+Ce(r-e,i),n];case U.Top:return[e,n-Ce(n-o,i)];case U.Bottom:return[e,n+Ce(o-n,i)]}}function so({sourceX:t,sourceY:e,sourcePosition:n=U.Bottom,targetX:r,targetY:o,targetPosition:i=U.Top,curvature:s=.25}){const[c,a]=ir({pos:n,x1:t,y1:e,x2:r,y2:o,c:s}),[u,l]=ir({pos:i,x1:r,y1:o,x2:t,y2:e,c:s}),[d,g,h,x]=oo({sourceX:t,sourceY:e,targetX:r,targetY:o,sourceControlX:c,sourceControlY:a,targetControlX:u,targetControlY:l});return[`M${t},${e} C${c},${a} ${u},${l} ${r},${o}`,d,g,h,x]}const Fe=b.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:o=U.Bottom,targetPosition:i=U.Top,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:g,markerEnd:h,markerStart:x,pathOptions:p,interactionWidth:_})=>{const[m,E,A]=so({sourceX:t,sourceY:e,sourcePosition:o,targetX:n,targetY:r,targetPosition:i,curvature:p==null?void 0:p.curvature});return N.createElement(be,{path:m,labelX:E,labelY:A,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:g,markerEnd:h,markerStart:x,interactionWidth:_})});Fe.displayName="BezierEdge";const Dn=b.createContext(null),El=Dn.Provider;Dn.Consumer;const Sl=()=>b.useContext(Dn),bl=t=>"id"in t&&"source"in t&&"target"in t,Nl=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,wn=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,Al=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),Cl=(t,e)=>{if(!t.source||!t.target)return e;let n;return bl(t)?n={...t}:n={...t,id:Nl(t)},Al(n,e)?e:e.concat(n)},vn=({x:t,y:e},[n,r,o],i,[s,c])=>{const a={x:(t-n)/o,y:(e-r)/o};return i?{x:s*Math.round(a.x/s),y:c*Math.round(a.y/c)}:a},co=({x:t,y:e},[n,r,o])=>({x:t*o+n,y:e*o+r}),Ft=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],o={x:t.position.x-n,y:t.position.y-r};return{...o,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:o}},qe=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,o)=>{const{x:i,y:s}=Ft(o,e).positionAbsolute;return jr(r,xe({x:i,y:s,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return to(n)},ao=(t,e,[n,r,o]=[0,0,1],i=!1,s=!1,c=[0,0])=>{const a={x:(e.x-n)/o,y:(e.y-r)/o,width:e.width/o,height:e.height/o},u=[];return t.forEach(l=>{const{width:d,height:g,selectable:h=!0,hidden:x=!1}=l;if(s&&!h||x)return!1;const{positionAbsolute:p}=Ft(l,c),_={x:p.x,y:p.y,width:d||0,height:g||0},m=mn(a,_),E=typeof d>"u"||typeof g>"u"||d===null||g===null,A=i&&m>0,v=(d||0)*(g||0);(E||A||m>=v||l.dragging)&&u.push(l)}),u},lo=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},uo=(t,e,n,r,o,i=.1)=>{const s=e/(t.width*(1+i)),c=n/(t.height*(1+i)),a=Math.min(s,c),u=ie(a,r,o),l=t.x+t.width/2,d=t.y+t.height/2,g=e/2-l*u,h=n/2-d*u;return{x:g,y:h,zoom:u}},Vt=(t,e=0)=>t.transition().duration(e);function sr(t,e,n,r){return(e[n]||[]).reduce((o,i)=>{var s,c;return`${t.id}-${i.id}-${n}`!==r&&o.push({id:i.id||null,type:n,nodeId:t.id,x:(((s=t.positionAbsolute)==null?void 0:s.x)??0)+i.x+i.width/2,y:(((c=t.positionAbsolute)==null?void 0:c.y)??0)+i.y+i.height/2}),o},[])}function Ml(t,e,n,r,o,i){const{x:s,y:c}=It(t),u=e.elementsFromPoint(s,c).find(x=>x.classList.contains("react-flow__handle"));if(u){const x=u.getAttribute("data-nodeid");if(x){const p=Rn(void 0,u),_=u.getAttribute("data-handleid"),m=i({nodeId:x,id:_,type:p});if(m){const E=o.find(A=>A.nodeId===x&&A.type===p&&A.id===_);return{handle:{id:_,type:p,nodeId:x,x:(E==null?void 0:E.x)||n.x,y:(E==null?void 0:E.y)||n.y},validHandleResult:m}}}}let l=[],d=1/0;if(o.forEach(x=>{const p=Math.sqrt((x.x-n.x)**2+(x.y-n.y)**2);if(p<=r){const _=i(x);p<=d&&(p<d?l=[{handle:x,validHandleResult:_}]:p===d&&l.push({handle:x,validHandleResult:_}),d=p)}}),!l.length)return{handle:null,validHandleResult:fo()};if(l.length===1)return l[0];const g=l.some(({validHandleResult:x})=>x.isValid),h=l.some(({handle:x})=>x.type==="target");return l.find(({handle:x,validHandleResult:p})=>h?x.type==="target":g?p.isValid:!0)||l[0]}const $l={source:null,target:null,sourceHandle:null,targetHandle:null},fo=()=>({handleDomNode:null,isValid:!1,connection:$l,endHandle:null});function ho(t,e,n,r,o,i,s){const c=o==="target",a=s.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),u={...fo(),handleDomNode:a};if(a){const l=Rn(void 0,a),d=a.getAttribute("data-nodeid"),g=a.getAttribute("data-handleid"),h=a.classList.contains("connectable"),x=a.classList.contains("connectableend"),p={source:c?d:n,sourceHandle:c?g:r,target:c?n:d,targetHandle:c?r:g};u.connection=p,h&&x&&(e===Yt.Strict?c&&l==="source"||!c&&l==="target":d!==n||g!==r)&&(u.endHandle={nodeId:d,handleId:g,type:l},u.isValid=i(p))}return u}function Tl({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((o,i)=>{if(i[tt]){const{handleBounds:s}=i[tt];let c=[],a=[];s&&(c=sr(i,s,"source",`${e}-${n}-${r}`),a=sr(i,s,"target",`${e}-${n}-${r}`)),o.push(...c,...a)}return o},[])}function Rn(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function rn(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function kl(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function go({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:o,getState:i,setState:s,isValidConnection:c,edgeUpdaterType:a,onReconnectEnd:u}){const l=Jr(t.target),{connectionMode:d,domNode:g,autoPanOnConnect:h,connectionRadius:x,onConnectStart:p,panBy:_,getNodes:m,cancelConnection:E}=i();let A=0,v;const{x:T,y:k}=It(t),P=l==null?void 0:l.elementFromPoint(T,k),V=Rn(a,P),$=g==null?void 0:g.getBoundingClientRect();if(!$||!V)return;let B,R=It(t,$),L=!1,H=null,f=!1,S=null;const y=Tl({nodes:m(),nodeId:n,handleId:e,handleType:V}),M=()=>{if(!h)return;const[C,z]=Qr(R,$);_({x:C,y:z}),A=requestAnimationFrame(M)};s({connectionPosition:R,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:V,connectionStartHandle:{nodeId:n,handleId:e,type:V},connectionEndHandle:null}),p==null||p(t,{nodeId:n,handleId:e,handleType:V});function I(C){const{transform:z}=i();R=It(C,$);const{handle:D,validHandleResult:O}=Ml(C,l,vn(R,z,!1,[1,1]),x,y,F=>ho(F,d,n,e,o?"target":"source",c,l));if(v=D,L||(M(),L=!0),S=O.handleDomNode,H=O.connection,f=O.isValid,s({connectionPosition:v&&f?co({x:v.x,y:v.y},z):R,connectionStatus:kl(!!v,f),connectionEndHandle:O.endHandle}),!v&&!f&&!S)return rn(B);H.source!==H.target&&S&&(rn(B),B=S,S.classList.add("connecting","react-flow__handle-connecting"),S.classList.toggle("valid",f),S.classList.toggle("react-flow__handle-valid",f))}function w(C){var z,D;(v||S)&&H&&f&&(r==null||r(H)),(D=(z=i()).onConnectEnd)==null||D.call(z,C),a&&(u==null||u(C)),rn(B),E(),cancelAnimationFrame(A),L=!1,f=!1,H=null,S=null,l.removeEventListener("mousemove",I),l.removeEventListener("mouseup",w),l.removeEventListener("touchmove",I),l.removeEventListener("touchend",w)}l.addEventListener("mousemove",I),l.addEventListener("mouseup",w),l.addEventListener("touchmove",I),l.addEventListener("touchend",w)}const cr=()=>!0,Il=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),zl=(t,e,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:i,connectionClickStartHandle:s}=r;return{connecting:(o==null?void 0:o.nodeId)===t&&(o==null?void 0:o.handleId)===e&&(o==null?void 0:o.type)===n||(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===n,clickConnecting:(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===n}},mo=b.forwardRef(({type:t="source",position:e=U.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:i=!0,id:s,onConnect:c,children:a,className:u,onMouseDown:l,onTouchStart:d,...g},h)=>{var $,B;const x=s||null,p=t==="target",_=rt(),m=Sl(),{connectOnClick:E,noPanClassName:A}=j(Il,ot),{connecting:v,clickConnecting:T}=j(zl(m,x,t),ot);m||(B=($=_.getState()).onError)==null||B.call($,"010",Mt.error010());const k=R=>{const{defaultEdgeOptions:L,onConnect:H,hasDefaultEdges:f}=_.getState(),S={...L,...R};if(f){const{edges:y,setEdges:M}=_.getState();M(Cl(S,y))}H==null||H(S),c==null||c(S)},P=R=>{if(!m)return;const L=no(R);o&&(L&&R.button===0||!L)&&go({event:R,handleId:x,nodeId:m,onConnect:k,isTarget:p,getState:_.getState,setState:_.setState,isValidConnection:n||_.getState().isValidConnection||cr}),L?l==null||l(R):d==null||d(R)},V=R=>{const{onClickConnectStart:L,onClickConnectEnd:H,connectionClickStartHandle:f,connectionMode:S,isValidConnection:y}=_.getState();if(!m||!f&&!o)return;if(!f){L==null||L(R,{nodeId:m,handleId:x,handleType:t}),_.setState({connectionClickStartHandle:{nodeId:m,type:t,handleId:x}});return}const M=Jr(R.target),I=n||y||cr,{connection:w,isValid:C}=ho({nodeId:m,id:x,type:t},S,f.nodeId,f.handleId||null,f.type,I,M);C&&k(w),H==null||H(R),_.setState({connectionClickStartHandle:null})};return N.createElement("div",{"data-handleid":x,"data-nodeid":m,"data-handlepos":e,"data-id":`${m}-${x}-${t}`,className:st(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",A,u,{source:!p,target:p,connectable:r,connectablestart:o,connectableend:i,connecting:T,connectionindicator:r&&(o&&!v||i&&v)}]),onMouseDown:P,onTouchStart:P,onClick:E?V:void 0,ref:h,...g},a)});mo.displayName="Handle";var Oe=b.memo(mo);const po=({data:t,isConnectable:e,targetPosition:n=U.Top,sourcePosition:r=U.Bottom})=>N.createElement(N.Fragment,null,N.createElement(Oe,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,N.createElement(Oe,{type:"source",position:r,isConnectable:e}));po.displayName="DefaultNode";var xn=b.memo(po);const yo=({data:t,isConnectable:e,sourcePosition:n=U.Bottom})=>N.createElement(N.Fragment,null,t==null?void 0:t.label,N.createElement(Oe,{type:"source",position:n,isConnectable:e}));yo.displayName="InputNode";var wo=b.memo(yo);const vo=({data:t,isConnectable:e,targetPosition:n=U.Top})=>N.createElement(N.Fragment,null,N.createElement(Oe,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label);vo.displayName="OutputNode";var xo=b.memo(vo);const Pn=()=>null;Pn.displayName="GroupNode";const Dl=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),Me=t=>t.id;function Rl(t,e){return ot(t.selectedNodes.map(Me),e.selectedNodes.map(Me))&&ot(t.selectedEdges.map(Me),e.selectedEdges.map(Me))}const _o=b.memo(({onSelectionChange:t})=>{const e=rt(),{selectedNodes:n,selectedEdges:r}=j(Dl,Rl);return b.useEffect(()=>{const o={nodes:n,edges:r};t==null||t(o),e.getState().onSelectionChange.forEach(i=>i(o))},[n,r,t]),null});_o.displayName="SelectionListener";const Pl=t=>!!t.onSelectionChange;function Hl({onSelectionChange:t}){const e=j(Pl);return t||e?N.createElement(_o,{onSelectionChange:t}):null}const Bl=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function Kt(t,e){b.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function Z(t,e,n){b.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const Vl=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:i,onConnectEnd:s,onClickConnectStart:c,onClickConnectEnd:a,nodesDraggable:u,nodesConnectable:l,nodesFocusable:d,edgesFocusable:g,edgesUpdatable:h,elevateNodesOnSelect:x,minZoom:p,maxZoom:_,nodeExtent:m,onNodesChange:E,onEdgesChange:A,elementsSelectable:v,connectionMode:T,snapGrid:k,snapToGrid:P,translateExtent:V,connectOnClick:$,defaultEdgeOptions:B,fitView:R,fitViewOptions:L,onNodesDelete:H,onEdgesDelete:f,onNodeDrag:S,onNodeDragStart:y,onNodeDragStop:M,onSelectionDrag:I,onSelectionDragStart:w,onSelectionDragStop:C,noPanClassName:z,nodeOrigin:D,rfId:O,autoPanOnConnect:F,autoPanOnNodeDrag:X,onError:W,connectionRadius:G,isValidConnection:Q,nodeDragThreshold:q})=>{const{setNodes:K,setEdges:it,setDefaultNodesAndEdges:nt,setMinZoom:lt,setMaxZoom:ct,setTranslateExtent:et,setNodeExtent:ft,reset:J}=j(Bl,ot),Y=rt();return b.useEffect(()=>{const ut=r==null?void 0:r.map(_t=>({..._t,...B}));return nt(n,ut),()=>{J()}},[]),Z("defaultEdgeOptions",B,Y.setState),Z("connectionMode",T,Y.setState),Z("onConnect",o,Y.setState),Z("onConnectStart",i,Y.setState),Z("onConnectEnd",s,Y.setState),Z("onClickConnectStart",c,Y.setState),Z("onClickConnectEnd",a,Y.setState),Z("nodesDraggable",u,Y.setState),Z("nodesConnectable",l,Y.setState),Z("nodesFocusable",d,Y.setState),Z("edgesFocusable",g,Y.setState),Z("edgesUpdatable",h,Y.setState),Z("elementsSelectable",v,Y.setState),Z("elevateNodesOnSelect",x,Y.setState),Z("snapToGrid",P,Y.setState),Z("snapGrid",k,Y.setState),Z("onNodesChange",E,Y.setState),Z("onEdgesChange",A,Y.setState),Z("connectOnClick",$,Y.setState),Z("fitViewOnInit",R,Y.setState),Z("fitViewOnInitOptions",L,Y.setState),Z("onNodesDelete",H,Y.setState),Z("onEdgesDelete",f,Y.setState),Z("onNodeDrag",S,Y.setState),Z("onNodeDragStart",y,Y.setState),Z("onNodeDragStop",M,Y.setState),Z("onSelectionDrag",I,Y.setState),Z("onSelectionDragStart",w,Y.setState),Z("onSelectionDragStop",C,Y.setState),Z("noPanClassName",z,Y.setState),Z("nodeOrigin",D,Y.setState),Z("rfId",O,Y.setState),Z("autoPanOnConnect",F,Y.setState),Z("autoPanOnNodeDrag",X,Y.setState),Z("onError",W,Y.setState),Z("connectionRadius",G,Y.setState),Z("isValidConnection",Q,Y.setState),Z("nodeDragThreshold",q,Y.setState),Kt(t,K),Kt(e,it),Kt(p,lt),Kt(_,ct),Kt(V,et),Kt(m,ft),null},ar={display:"none"},Ll={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Eo="react-flow__node-desc",So="react-flow__edge-desc",Fl="react-flow__aria-live",Ol=t=>t.ariaLiveMessage;function Yl({rfId:t}){const e=j(Ol);return N.createElement("div",{id:`${Fl}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:Ll},e)}function Ul({rfId:t,disableKeyboardA11y:e}){return N.createElement(N.Fragment,null,N.createElement("div",{id:`${Eo}-${t}`,style:ar},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),N.createElement("div",{id:`${So}-${t}`,style:ar},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&N.createElement(Yl,{rfId:t}))}var Ee=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=b.useState(!1),o=b.useRef(!1),i=b.useRef(new Set([])),[s,c]=b.useMemo(()=>{if(t!==null){const u=(Array.isArray(t)?t:[t]).filter(d=>typeof d=="string").map(d=>d.split("+")),l=u.reduce((d,g)=>d.concat(...g),[]);return[u,l]}return[[],[]]},[t]);return b.useEffect(()=>{const a=typeof document<"u"?document:null,u=(e==null?void 0:e.target)||a;if(t!==null){const l=h=>{if(o.current=h.ctrlKey||h.metaKey||h.shiftKey,(!o.current||o.current&&!e.actInsideInputWithModifier)&&pn(h))return!1;const p=ur(h.code,c);i.current.add(h[p]),lr(s,i.current,!1)&&(h.preventDefault(),r(!0))},d=h=>{if((!o.current||o.current&&!e.actInsideInputWithModifier)&&pn(h))return!1;const p=ur(h.code,c);lr(s,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(h[p]),h.key==="Meta"&&i.current.clear(),o.current=!1},g=()=>{i.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",l),u==null||u.addEventListener("keyup",d),window.addEventListener("blur",g),()=>{u==null||u.removeEventListener("keydown",l),u==null||u.removeEventListener("keyup",d),window.removeEventListener("blur",g)}}},[t,r]),n};function lr(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(o=>e.has(o)))}function ur(t,e){return e.includes(t)?"code":"key"}function bo(t,e,n,r){var c,a;const o=t.parentNode||t.parentId;if(!o)return n;const i=e.get(o),s=Ft(i,r);return bo(i,e,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(((c=i[tt])==null?void 0:c.z)??0)>(n.z??0)?((a=i[tt])==null?void 0:a.z)??0:n.z??0},r)}function No(t,e,n){t.forEach(r=>{var i;const o=r.parentNode||r.parentId;if(o&&!t.has(o))throw new Error(`Parent node ${o} not found`);if(o||n!=null&&n[r.id]){const{x:s,y:c,z:a}=bo(r,t,{...r.position,z:((i=r[tt])==null?void 0:i.z)??0},e);r.positionAbsolute={x:s,y:c},r[tt].z=a,n!=null&&n[r.id]&&(r[tt].isParent=!0)}})}function on(t,e,n,r){const o=new Map,i={},s=r?1e3:0;return t.forEach(c=>{var h;const a=(gt(c.zIndex)?c.zIndex:0)+(c.selected?s:0),u=e.get(c.id),l={...c,positionAbsolute:{x:c.position.x,y:c.position.y}},d=c.parentNode||c.parentId;d&&(i[d]=!0);const g=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==c.type;Object.defineProperty(l,tt,{enumerable:!1,value:{handleBounds:g||(h=u==null?void 0:u[tt])==null?void 0:h.handleBounds,z:a}}),o.set(c.id,l)}),No(o,n,i),o}function Ao(t,e={}){const{getNodes:n,width:r,height:o,minZoom:i,maxZoom:s,d3Zoom:c,d3Selection:a,fitViewOnInitDone:u,fitViewOnInit:l,nodeOrigin:d}=t(),g=e.initial&&!u&&l;if(c&&a&&(g||!e.initial)){const x=n().filter(_=>{var E;const m=e.includeHiddenNodes?_.width&&_.height:!_.hidden;return(E=e.nodes)!=null&&E.length?m&&e.nodes.some(A=>A.id===_.id):m}),p=x.every(_=>_.width&&_.height);if(x.length>0&&p){const _=qe(x,d),{x:m,y:E,zoom:A}=uo(_,r,o,e.minZoom??i,e.maxZoom??s,e.padding??.1),v=At.translate(m,E).scale(A);return typeof e.duration=="number"&&e.duration>0?c.transform(Vt(a,e.duration),v):c.transform(a,v),!0}}return!1}function Xl(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[tt]:r[tt],selected:n.selected})}),new Map(e)}function Wl(t,e){return e.map(n=>{const r=t.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function $e({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:o,edges:i,onNodesChange:s,onEdgesChange:c,hasDefaultNodes:a,hasDefaultEdges:u}=n();t!=null&&t.length&&(a&&r({nodeInternals:Xl(t,o)}),s==null||s(t)),e!=null&&e.length&&(u&&r({edges:Wl(e,i)}),c==null||c(e))}const qt=()=>{},Zl={zoomIn:qt,zoomOut:qt,zoomTo:qt,getZoom:()=>1,setViewport:qt,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:qt,fitBounds:qt,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},Gl=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),Kl=()=>{const t=rt(),{d3Zoom:e,d3Selection:n}=j(Gl,ot);return b.useMemo(()=>n&&e?{zoomIn:o=>e.scaleBy(Vt(n,o==null?void 0:o.duration),1.2),zoomOut:o=>e.scaleBy(Vt(n,o==null?void 0:o.duration),1/1.2),zoomTo:(o,i)=>e.scaleTo(Vt(n,i==null?void 0:i.duration),o),getZoom:()=>t.getState().transform[2],setViewport:(o,i)=>{const[s,c,a]=t.getState().transform,u=At.translate(o.x??s,o.y??c).scale(o.zoom??a);e.transform(Vt(n,i==null?void 0:i.duration),u)},getViewport:()=>{const[o,i,s]=t.getState().transform;return{x:o,y:i,zoom:s}},fitView:o=>Ao(t.getState,o),setCenter:(o,i,s)=>{const{width:c,height:a,maxZoom:u}=t.getState(),l=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:u,d=c/2-o*l,g=a/2-i*l,h=At.translate(d,g).scale(l);e.transform(Vt(n,s==null?void 0:s.duration),h)},fitBounds:(o,i)=>{const{width:s,height:c,minZoom:a,maxZoom:u}=t.getState(),{x:l,y:d,zoom:g}=uo(o,s,c,a,u,(i==null?void 0:i.padding)??.1),h=At.translate(l,d).scale(g);e.transform(Vt(n,i==null?void 0:i.duration),h)},project:o=>{const{transform:i,snapToGrid:s,snapGrid:c}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),vn(o,i,s,c)},screenToFlowPosition:o=>{const{transform:i,snapToGrid:s,snapGrid:c,domNode:a}=t.getState();if(!a)return o;const{x:u,y:l}=a.getBoundingClientRect(),d={x:o.x-u,y:o.y-l};return vn(d,i,s,c)},flowToScreenPosition:o=>{const{transform:i,domNode:s}=t.getState();if(!s)return o;const{x:c,y:a}=s.getBoundingClientRect(),u=co(o,i);return{x:u.x+c,y:u.y+a}},viewportInitialized:!0}:Zl,[e,n])};function Hn(){const t=Kl(),e=rt(),n=b.useCallback(()=>e.getState().getNodes().map(p=>({...p})),[]),r=b.useCallback(p=>e.getState().nodeInternals.get(p),[]),o=b.useCallback(()=>{const{edges:p=[]}=e.getState();return p.map(_=>({..._}))},[]),i=b.useCallback(p=>{const{edges:_=[]}=e.getState();return _.find(m=>m.id===p)},[]),s=b.useCallback(p=>{const{getNodes:_,setNodes:m,hasDefaultNodes:E,onNodesChange:A}=e.getState(),v=_(),T=typeof p=="function"?p(v):p;if(E)m(T);else if(A){const k=T.length===0?v.map(P=>({type:"remove",id:P.id})):T.map(P=>({item:P,type:"reset"}));A(k)}},[]),c=b.useCallback(p=>{const{edges:_=[],setEdges:m,hasDefaultEdges:E,onEdgesChange:A}=e.getState(),v=typeof p=="function"?p(_):p;if(E)m(v);else if(A){const T=v.length===0?_.map(k=>({type:"remove",id:k.id})):v.map(k=>({item:k,type:"reset"}));A(T)}},[]),a=b.useCallback(p=>{const _=Array.isArray(p)?p:[p],{getNodes:m,setNodes:E,hasDefaultNodes:A,onNodesChange:v}=e.getState();if(A){const k=[...m(),..._];E(k)}else if(v){const T=_.map(k=>({item:k,type:"add"}));v(T)}},[]),u=b.useCallback(p=>{const _=Array.isArray(p)?p:[p],{edges:m=[],setEdges:E,hasDefaultEdges:A,onEdgesChange:v}=e.getState();if(A)E([...m,..._]);else if(v){const T=_.map(k=>({item:k,type:"add"}));v(T)}},[]),l=b.useCallback(()=>{const{getNodes:p,edges:_=[],transform:m}=e.getState(),[E,A,v]=m;return{nodes:p().map(T=>({...T})),edges:_.map(T=>({...T})),viewport:{x:E,y:A,zoom:v}}},[]),d=b.useCallback(({nodes:p,edges:_})=>{const{nodeInternals:m,getNodes:E,edges:A,hasDefaultNodes:v,hasDefaultEdges:T,onNodesDelete:k,onEdgesDelete:P,onNodesChange:V,onEdgesChange:$}=e.getState(),B=(p||[]).map(S=>S.id),R=(_||[]).map(S=>S.id),L=E().reduce((S,y)=>{const M=y.parentNode||y.parentId,I=!B.includes(y.id)&&M&&S.find(C=>C.id===M);return(typeof y.deletable=="boolean"?y.deletable:!0)&&(B.includes(y.id)||I)&&S.push(y),S},[]),H=A.filter(S=>typeof S.deletable=="boolean"?S.deletable:!0),f=H.filter(S=>R.includes(S.id));if(L||f){const S=lo(L,H),y=[...f,...S],M=y.reduce((I,w)=>(I.includes(w.id)||I.push(w.id),I),[]);if((T||v)&&(T&&e.setState({edges:A.filter(I=>!M.includes(I.id))}),v&&(L.forEach(I=>{m.delete(I.id)}),e.setState({nodeInternals:new Map(m)}))),M.length>0&&(P==null||P(y),$&&$(M.map(I=>({id:I,type:"remove"})))),L.length>0&&(k==null||k(L),V)){const I=L.map(w=>({id:w.id,type:"remove"}));V(I)}}},[]),g=b.useCallback(p=>{const _=ml(p),m=_?null:e.getState().nodeInternals.get(p.id);return!_&&!m?[null,null,_]:[_?p:er(m),m,_]},[]),h=b.useCallback((p,_=!0,m)=>{const[E,A,v]=g(p);return E?(m||e.getState().getNodes()).filter(T=>{if(!v&&(T.id===A.id||!T.positionAbsolute))return!1;const k=er(T),P=mn(k,E);return _&&P>0||P>=E.width*E.height}):[]},[]),x=b.useCallback((p,_,m=!0)=>{const[E]=g(p);if(!E)return!1;const A=mn(E,_);return m&&A>0||A>=E.width*E.height},[]);return b.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:o,getEdge:i,setNodes:s,setEdges:c,addNodes:a,addEdges:u,toObject:l,deleteElements:d,getIntersectingNodes:h,isNodeIntersecting:x}),[t,n,r,o,i,s,c,a,u,l,d,h,x])}const ql={actInsideInputWithModifier:!1};var Ql=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=rt(),{deleteElements:r}=Hn(),o=Ee(t,ql),i=Ee(e);b.useEffect(()=>{if(o){const{edges:s,getNodes:c}=n.getState(),a=c().filter(l=>l.selected),u=s.filter(l=>l.selected);r({nodes:a,edges:u}),n.setState({nodesSelectionActive:!1})}},[o]),b.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function Jl(t){const e=rt();b.useEffect(()=>{let n;const r=()=>{var i,s;if(!t.current)return;const o=$n(t.current);(o.height===0||o.width===0)&&((s=(i=e.getState()).onError)==null||s.call(i,"004",Mt.error004())),e.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const Bn={position:"absolute",width:"100%",height:"100%",top:0,left:0},jl=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Te=t=>({x:t.x,y:t.y,zoom:t.k}),Qt=(t,e)=>t.target.closest(`.${e}`),fr=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),dr=t=>{const e=t.ctrlKey&&Ve()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},tu=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),eu=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:i=!0,panOnScroll:s=!1,panOnScrollSpeed:c=.5,panOnScrollMode:a=Lt.Free,zoomOnDoubleClick:u=!0,elementsSelectable:l,panOnDrag:d=!0,defaultViewport:g,translateExtent:h,minZoom:x,maxZoom:p,zoomActivationKeyCode:_,preventScrolling:m=!0,children:E,noWheelClassName:A,noPanClassName:v})=>{const T=b.useRef(),k=rt(),P=b.useRef(!1),V=b.useRef(!1),$=b.useRef(null),B=b.useRef({x:0,y:0,zoom:0}),{d3Zoom:R,d3Selection:L,d3ZoomHandler:H,userSelectionActive:f}=j(tu,ot),S=Ee(_),y=b.useRef(0),M=b.useRef(!1),I=b.useRef();return Jl($),b.useEffect(()=>{if($.current){const w=$.current.getBoundingClientRect(),C=Kr().scaleExtent([x,p]).translateExtent(h),z=ht($.current).call(C),D=At.translate(g.x,g.y).scale(ie(g.zoom,x,p)),O=[[0,0],[w.width,w.height]],F=C.constrain()(D,O,h);C.transform(z,F),C.wheelDelta(dr),k.setState({d3Zoom:C,d3Selection:z,d3ZoomHandler:z.on("wheel.zoom"),transform:[F.x,F.y,F.k],domNode:$.current.closest(".react-flow")})}},[]),b.useEffect(()=>{L&&R&&(s&&!S&&!f?L.on("wheel.zoom",w=>{if(Qt(w,A))return!1;w.preventDefault(),w.stopImmediatePropagation();const C=L.property("__zoom").k||1;if(w.ctrlKey&&i){const Q=pt(w),q=dr(w),K=C*Math.pow(2,q);R.scaleTo(L,K,Q,w);return}const z=w.deltaMode===1?20:1;let D=a===Lt.Vertical?0:w.deltaX*z,O=a===Lt.Horizontal?0:w.deltaY*z;!Ve()&&w.shiftKey&&a!==Lt.Vertical&&(D=w.deltaY*z,O=0),R.translateBy(L,-(D/C)*c,-(O/C)*c,{internal:!0});const F=Te(L.property("__zoom")),{onViewportChangeStart:X,onViewportChange:W,onViewportChangeEnd:G}=k.getState();clearTimeout(I.current),M.current||(M.current=!0,e==null||e(w,F),X==null||X(F)),M.current&&(t==null||t(w,F),W==null||W(F),I.current=setTimeout(()=>{n==null||n(w,F),G==null||G(F),M.current=!1},150))},{passive:!1}):typeof H<"u"&&L.on("wheel.zoom",function(w,C){if(!m&&w.type==="wheel"&&!w.ctrlKey||Qt(w,A))return null;w.preventDefault(),H.call(this,w,C)},{passive:!1}))},[f,s,a,L,R,H,S,i,m,A,e,t,n]),b.useEffect(()=>{R&&R.on("start",w=>{var D,O;if(!w.sourceEvent||w.sourceEvent.internal)return null;y.current=(D=w.sourceEvent)==null?void 0:D.button;const{onViewportChangeStart:C}=k.getState(),z=Te(w.transform);P.current=!0,B.current=z,((O=w.sourceEvent)==null?void 0:O.type)==="mousedown"&&k.setState({paneDragging:!0}),C==null||C(z),e==null||e(w.sourceEvent,z)})},[R,e]),b.useEffect(()=>{R&&(f&&!P.current?R.on("zoom",null):f||R.on("zoom",w=>{var z;const{onViewportChange:C}=k.getState();if(k.setState({transform:[w.transform.x,w.transform.y,w.transform.k]}),V.current=!!(r&&fr(d,y.current??0)),(t||C)&&!((z=w.sourceEvent)!=null&&z.internal)){const D=Te(w.transform);C==null||C(D),t==null||t(w.sourceEvent,D)}}))},[f,R,t,d,r]),b.useEffect(()=>{R&&R.on("end",w=>{if(!w.sourceEvent||w.sourceEvent.internal)return null;const{onViewportChangeEnd:C}=k.getState();if(P.current=!1,k.setState({paneDragging:!1}),r&&fr(d,y.current??0)&&!V.current&&r(w.sourceEvent),V.current=!1,(n||C)&&jl(B.current,w.transform)){const z=Te(w.transform);B.current=z,clearTimeout(T.current),T.current=setTimeout(()=>{C==null||C(z),n==null||n(w.sourceEvent,z)},s?150:0)}})},[R,s,d,n,r]),b.useEffect(()=>{R&&R.filter(w=>{const C=S||o,z=i&&w.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&w.button===1&&w.type==="mousedown"&&(Qt(w,"react-flow__node")||Qt(w,"react-flow__edge")))return!0;if(!d&&!C&&!s&&!u&&!i||f||!u&&w.type==="dblclick"||Qt(w,A)&&w.type==="wheel"||Qt(w,v)&&(w.type!=="wheel"||s&&w.type==="wheel"&&!S)||!i&&w.ctrlKey&&w.type==="wheel"||!C&&!s&&!z&&w.type==="wheel"||!d&&(w.type==="mousedown"||w.type==="touchstart")||Array.isArray(d)&&!d.includes(w.button)&&w.type==="mousedown")return!1;const D=Array.isArray(d)&&d.includes(w.button)||!w.button||w.button<=1;return(!w.ctrlKey||w.type==="wheel")&&D})},[f,R,o,i,s,u,d,l,S]),N.createElement("div",{className:"react-flow__renderer",ref:$,style:Bn},E)},nu=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function ru(){const{userSelectionActive:t,userSelectionRect:e}=j(nu,ot);return t&&e?N.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function hr(t,e){const n=e.parentNode||e.parentId,r=t.find(o=>o.id===n);if(r){const o=e.position.x+e.width-r.width,i=e.position.y+e.height-r.height;if(o>0||i>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,o>0&&(r.style.width+=o),i>0&&(r.style.height+=i),e.position.x<0){const s=Math.abs(e.position.x);r.position.x=r.position.x-s,r.style.width+=s,e.position.x=0}if(e.position.y<0){const s=Math.abs(e.position.y);r.position.y=r.position.y-s,r.style.height+=s,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function Co(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,o)=>{const i=t.filter(c=>c.id===o.id);if(i.length===0)return r.push(o),r;const s={...o};for(const c of i)if(c)switch(c.type){case"select":{s.selected=c.selected;break}case"position":{typeof c.position<"u"&&(s.position=c.position),typeof c.positionAbsolute<"u"&&(s.positionAbsolute=c.positionAbsolute),typeof c.dragging<"u"&&(s.dragging=c.dragging),s.expandParent&&hr(r,s);break}case"dimensions":{typeof c.dimensions<"u"&&(s.width=c.dimensions.width,s.height=c.dimensions.height),typeof c.updateStyle<"u"&&(s.style={...s.style||{},...c.dimensions}),typeof c.resizing=="boolean"&&(s.resizing=c.resizing),s.expandParent&&hr(r,s);break}case"remove":return r}return r.push(s),r},n)}function Mo(t,e){return Co(t,e)}function ou(t,e){return Co(t,e)}const Tt=(t,e)=>({id:t,type:"select",selected:e});function jt(t,e){return t.reduce((n,r)=>{const o=e.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(Tt(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(Tt(r.id,!1))),n},[])}const sn=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},iu=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),$o=b.memo(({isSelecting:t,selectionMode:e=_e.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:i,onPaneContextMenu:s,onPaneScroll:c,onPaneMouseEnter:a,onPaneMouseMove:u,onPaneMouseLeave:l,children:d})=>{const g=b.useRef(null),h=rt(),x=b.useRef(0),p=b.useRef(0),_=b.useRef(),{userSelectionActive:m,elementsSelectable:E,dragging:A}=j(iu,ot),v=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,p.current=0},T=H=>{i==null||i(H),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},k=H=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){H.preventDefault();return}s==null||s(H)},P=c?H=>c(H):void 0,V=H=>{const{resetSelectedElements:f,domNode:S}=h.getState();if(_.current=S==null?void 0:S.getBoundingClientRect(),!E||!t||H.button!==0||H.target!==g.current||!_.current)return;const{x:y,y:M}=It(H,_.current);f(),h.setState({userSelectionRect:{width:0,height:0,startX:y,startY:M,x:y,y:M}}),r==null||r(H)},$=H=>{const{userSelectionRect:f,nodeInternals:S,edges:y,transform:M,onNodesChange:I,onEdgesChange:w,nodeOrigin:C,getNodes:z}=h.getState();if(!t||!_.current||!f)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const D=It(H,_.current),O=f.startX??0,F=f.startY??0,X={...f,x:D.x<O?D.x:O,y:D.y<F?D.y:F,width:Math.abs(D.x-O),height:Math.abs(D.y-F)},W=z(),G=ao(S,X,M,e===_e.Partial,!0,C),Q=lo(G,y).map(K=>K.id),q=G.map(K=>K.id);if(x.current!==q.length){x.current=q.length;const K=jt(W,q);K.length&&(I==null||I(K))}if(p.current!==Q.length){p.current=Q.length;const K=jt(y,Q);K.length&&(w==null||w(K))}h.setState({userSelectionRect:X})},B=H=>{if(H.button!==0)return;const{userSelectionRect:f}=h.getState();!m&&f&&H.target===g.current&&(T==null||T(H)),h.setState({nodesSelectionActive:x.current>0}),v(),o==null||o(H)},R=H=>{m&&(h.setState({nodesSelectionActive:x.current>0}),o==null||o(H)),v()},L=E&&(t||m);return N.createElement("div",{className:st(["react-flow__pane",{dragging:A,selection:t}]),onClick:L?void 0:sn(T,g),onContextMenu:sn(k,g),onWheel:sn(P,g),onMouseEnter:L?void 0:a,onMouseDown:L?V:void 0,onMouseMove:L?$:u,onMouseUp:L?B:void 0,onMouseLeave:L?R:l,ref:g,style:Bn},d,N.createElement(ru,null))});$o.displayName="Pane";function To(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:To(r,e):!1}function gr(t,e,n){let r=t;do{if(r!=null&&r.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function su(t,e,n,r){return Array.from(t.values()).filter(o=>(o.selected||o.id===r)&&(!o.parentNode||o.parentId||!To(o,t))&&(o.draggable||e&&typeof o.draggable>"u")).map(o=>{var i,s;return{id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((i=o.positionAbsolute)==null?void 0:i.x)??0),y:n.y-(((s=o.positionAbsolute)==null?void 0:s.y)??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}})}function cu(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function ko(t,e,n,r,o=[0,0],i){const s=cu(t,t.extent||r);let c=s;const a=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(a&&t.width&&t.height){const d=n.get(a),{x:g,y:h}=Ft(d,o).positionAbsolute;c=d&&gt(g)&&gt(h)&&gt(d.width)&&gt(d.height)?[[g+t.width*o[0],h+t.height*o[1]],[g+d.width-t.width+t.width*o[0],h+d.height-t.height+t.height*o[1]]]:c}else i==null||i("005",Mt.error005()),c=s;else if(t.extent&&a&&t.extent!=="parent"){const d=n.get(a),{x:g,y:h}=Ft(d,o).positionAbsolute;c=[[t.extent[0][0]+g,t.extent[0][1]+h],[t.extent[1][0]+g,t.extent[1][1]+h]]}let u={x:0,y:0};if(a){const d=n.get(a);u=Ft(d,o).positionAbsolute}const l=c&&c!=="parent"?Tn(e,c):e;return{position:{x:l.x-u.x,y:l.y-u.y},positionAbsolute:l}}function cn({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[t?r.find(o=>o.id===t):r[0],r]}const mr=(t,e,n,r)=>{const o=e.querySelectorAll(t);if(!o||!o.length)return null;const i=Array.from(o),s=e.getBoundingClientRect(),c={x:s.width*r[0],y:s.height*r[1]};return i.map(a=>{const u=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),position:a.getAttribute("data-handlepos"),x:(u.left-s.left-c.x)/n,y:(u.top-s.top-c.y)/n,...$n(a)}})};function he(t,e,n){return n===void 0?n:r=>{const o=e().nodeInternals.get(t);o&&n(r,{...o})}}function _n({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:s,nodeInternals:c,onError:a}=e.getState(),u=c.get(t);if(!u){a==null||a("012",Mt.error012(t));return}e.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&s)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var l;return(l=r==null?void 0:r.current)==null?void 0:l.blur()})):o([t])}function au(){const t=rt();return b.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:o,snapToGrid:i}=t.getState(),s=n.touches?n.touches[0].clientX:n.clientX,c=n.touches?n.touches[0].clientY:n.clientY,a={x:(s-r[0])/r[2],y:(c-r[1])/r[2]};return{xSnapped:i?o[0]*Math.round(a.x/o[0]):a.x,ySnapped:i?o[1]*Math.round(a.y/o[1]):a.y,...a}},[])}function an(t){return(e,n,r)=>t==null?void 0:t(e,r)}function Io({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:i,selectNodesOnDrag:s}){const c=rt(),[a,u]=b.useState(!1),l=b.useRef([]),d=b.useRef({x:null,y:null}),g=b.useRef(0),h=b.useRef(null),x=b.useRef({x:0,y:0}),p=b.useRef(null),_=b.useRef(!1),m=b.useRef(!1),E=b.useRef(!1),A=au();return b.useEffect(()=>{if(t!=null&&t.current){const v=ht(t.current),T=({x:V,y:$})=>{const{nodeInternals:B,onNodeDrag:R,onSelectionDrag:L,updateNodePositions:H,nodeExtent:f,snapGrid:S,snapToGrid:y,nodeOrigin:M,onError:I}=c.getState();d.current={x:V,y:$};let w=!1,C={x:0,y:0,x2:0,y2:0};if(l.current.length>1&&f){const D=qe(l.current,M);C=xe(D)}if(l.current=l.current.map(D=>{const O={x:V-D.distance.x,y:$-D.distance.y};y&&(O.x=S[0]*Math.round(O.x/S[0]),O.y=S[1]*Math.round(O.y/S[1]));const F=[[f[0][0],f[0][1]],[f[1][0],f[1][1]]];l.current.length>1&&f&&!D.extent&&(F[0][0]=D.positionAbsolute.x-C.x+f[0][0],F[1][0]=D.positionAbsolute.x+(D.width??0)-C.x2+f[1][0],F[0][1]=D.positionAbsolute.y-C.y+f[0][1],F[1][1]=D.positionAbsolute.y+(D.height??0)-C.y2+f[1][1]);const X=ko(D,O,B,F,M,I);return w=w||D.position.x!==X.position.x||D.position.y!==X.position.y,D.position=X.position,D.positionAbsolute=X.positionAbsolute,D}),!w)return;H(l.current,!0,!0),u(!0);const z=o?R:an(L);if(z&&p.current){const[D,O]=cn({nodeId:o,dragItems:l.current,nodeInternals:B});z(p.current,D,O)}},k=()=>{if(!h.current)return;const[V,$]=Qr(x.current,h.current);if(V!==0||$!==0){const{transform:B,panBy:R}=c.getState();d.current.x=(d.current.x??0)-V/B[2],d.current.y=(d.current.y??0)-$/B[2],R({x:V,y:$})&&T(d.current)}g.current=requestAnimationFrame(k)},P=V=>{var M;const{nodeInternals:$,multiSelectionActive:B,nodesDraggable:R,unselectNodesAndEdges:L,onNodeDragStart:H,onSelectionDragStart:f}=c.getState();m.current=!0;const S=o?H:an(f);(!s||!i)&&!B&&o&&((M=$.get(o))!=null&&M.selected||L()),o&&i&&s&&_n({id:o,store:c,nodeRef:t});const y=A(V);if(d.current=y,l.current=su($,R,y,o),S&&l.current){const[I,w]=cn({nodeId:o,dragItems:l.current,nodeInternals:$});S(V.sourceEvent,I,w)}};if(e)v.on(".drag",null);else{const V=Xc().on("start",$=>{const{domNode:B,nodeDragThreshold:R}=c.getState();R===0&&P($),E.current=!1;const L=A($);d.current=L,h.current=(B==null?void 0:B.getBoundingClientRect())||null,x.current=It($.sourceEvent,h.current)}).on("drag",$=>{var H,f;const B=A($),{autoPanOnNodeDrag:R,nodeDragThreshold:L}=c.getState();if($.sourceEvent.type==="touchmove"&&$.sourceEvent.touches.length>1&&(E.current=!0),!E.current){if(!_.current&&m.current&&R&&(_.current=!0,k()),!m.current){const S=B.xSnapped-(((H=d==null?void 0:d.current)==null?void 0:H.x)??0),y=B.ySnapped-(((f=d==null?void 0:d.current)==null?void 0:f.y)??0);Math.sqrt(S*S+y*y)>L&&P($)}(d.current.x!==B.xSnapped||d.current.y!==B.ySnapped)&&l.current&&m.current&&(p.current=$.sourceEvent,x.current=It($.sourceEvent,h.current),T(B))}}).on("end",$=>{if(!(!m.current||E.current)&&(u(!1),_.current=!1,m.current=!1,cancelAnimationFrame(g.current),l.current)){const{updateNodePositions:B,nodeInternals:R,onNodeDragStop:L,onSelectionDragStop:H}=c.getState(),f=o?L:an(H);if(B(l.current,!1,!1),f){const[S,y]=cn({nodeId:o,dragItems:l.current,nodeInternals:R});f($.sourceEvent,S,y)}}}).filter($=>{const B=$.target;return!$.button&&(!n||!gr(B,`.${n}`,t))&&(!r||gr(B,r,t))});return v.call(V),()=>{v.on(".drag",null)}}}},[t,e,n,r,i,c,o,s,A]),a}function zo(){const t=rt();return b.useCallback(n=>{const{nodeInternals:r,nodeExtent:o,updateNodePositions:i,getNodes:s,snapToGrid:c,snapGrid:a,onError:u,nodesDraggable:l}=t.getState(),d=s().filter(E=>E.selected&&(E.draggable||l&&typeof E.draggable>"u")),g=c?a[0]:5,h=c?a[1]:5,x=n.isShiftPressed?4:1,p=n.x*g*x,_=n.y*h*x,m=d.map(E=>{if(E.positionAbsolute){const A={x:E.positionAbsolute.x+p,y:E.positionAbsolute.y+_};c&&(A.x=a[0]*Math.round(A.x/a[0]),A.y=a[1]*Math.round(A.y/a[1]));const{positionAbsolute:v,position:T}=ko(E,A,r,o,void 0,u);E.position=T,E.positionAbsolute=v}return E});i(m,!0,!1)},[])}const ee={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var ge=t=>{const e=({id:n,type:r,data:o,xPos:i,yPos:s,xPosOrigin:c,yPosOrigin:a,selected:u,onClick:l,onMouseEnter:d,onMouseMove:g,onMouseLeave:h,onContextMenu:x,onDoubleClick:p,style:_,className:m,isDraggable:E,isSelectable:A,isConnectable:v,isFocusable:T,selectNodesOnDrag:k,sourcePosition:P,targetPosition:V,hidden:$,resizeObserver:B,dragHandle:R,zIndex:L,isParent:H,noDragClassName:f,noPanClassName:S,initialized:y,disableKeyboardA11y:M,ariaLabel:I,rfId:w,hasHandleBounds:C})=>{const z=rt(),D=b.useRef(null),O=b.useRef(null),F=b.useRef(P),X=b.useRef(V),W=b.useRef(r),G=A||E||l||d||g||h,Q=zo(),q=he(n,z.getState,d),K=he(n,z.getState,g),it=he(n,z.getState,h),nt=he(n,z.getState,x),lt=he(n,z.getState,p),ct=J=>{const{nodeDragThreshold:Y}=z.getState();if(A&&(!k||!E||Y>0)&&_n({id:n,store:z,nodeRef:D}),l){const ut=z.getState().nodeInternals.get(n);ut&&l(J,{...ut})}},et=J=>{if(!pn(J)&&!M)if(eo.includes(J.key)&&A){const Y=J.key==="Escape";_n({id:n,store:z,unselect:Y,nodeRef:D})}else E&&u&&Object.prototype.hasOwnProperty.call(ee,J.key)&&(z.setState({ariaLiveMessage:`Moved selected node ${J.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~s}`}),Q({x:ee[J.key].x,y:ee[J.key].y,isShiftPressed:J.shiftKey}))};b.useEffect(()=>()=>{O.current&&(B==null||B.unobserve(O.current),O.current=null)},[]),b.useEffect(()=>{if(D.current&&!$){const J=D.current;(!y||!C||O.current!==J)&&(O.current&&(B==null||B.unobserve(O.current)),B==null||B.observe(J),O.current=J)}},[$,y,C]),b.useEffect(()=>{const J=W.current!==r,Y=F.current!==P,ut=X.current!==V;D.current&&(J||Y||ut)&&(J&&(W.current=r),Y&&(F.current=P),ut&&(X.current=V),z.getState().updateNodeDimensions([{id:n,nodeElement:D.current,forceUpdate:!0}]))},[n,r,P,V]);const ft=Io({nodeRef:D,disabled:$||!E,noDragClassName:f,handleSelector:R,nodeId:n,isSelectable:A,selectNodesOnDrag:k});return $?null:N.createElement("div",{className:st(["react-flow__node",`react-flow__node-${r}`,{[S]:E},m,{selected:u,selectable:A,parent:H,dragging:ft}]),ref:D,style:{zIndex:L,transform:`translate(${c}px,${a}px)`,pointerEvents:G?"all":"none",visibility:y?"visible":"hidden",..._},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:q,onMouseMove:K,onMouseLeave:it,onContextMenu:nt,onClick:ct,onDoubleClick:lt,onKeyDown:T?et:void 0,tabIndex:T?0:void 0,role:T?"button":void 0,"aria-describedby":M?void 0:`${Eo}-${w}`,"aria-label":I},N.createElement(El,{value:n},N.createElement(t,{id:n,data:o,type:r,xPos:i,yPos:s,selected:u,isConnectable:v,sourcePosition:P,targetPosition:V,dragging:ft,dragHandle:R,zIndex:L})))};return e.displayName="NodeWrapper",b.memo(e)};const lu=t=>{const e=t.getNodes().filter(n=>n.selected);return{...qe(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function uu({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=rt(),{width:o,height:i,x:s,y:c,transformString:a,userSelectionActive:u}=j(lu,ot),l=zo(),d=b.useRef(null);if(b.useEffect(()=>{var x;n||(x=d.current)==null||x.focus({preventScroll:!0})},[n]),Io({nodeRef:d}),u||!o||!i)return null;const g=t?x=>{const p=r.getState().getNodes().filter(_=>_.selected);t(x,p)}:void 0,h=x=>{Object.prototype.hasOwnProperty.call(ee,x.key)&&l({x:ee[x.key].x,y:ee[x.key].y,isShiftPressed:x.shiftKey})};return N.createElement("div",{className:st(["react-flow__nodesselection","react-flow__container",e]),style:{transform:a}},N.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:g,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:o,height:i,top:c,left:s}}))}var fu=b.memo(uu);const du=t=>t.nodesSelectionActive,Do=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,deleteKeyCode:c,onMove:a,onMoveStart:u,onMoveEnd:l,selectionKeyCode:d,selectionOnDrag:g,selectionMode:h,onSelectionStart:x,onSelectionEnd:p,multiSelectionKeyCode:_,panActivationKeyCode:m,zoomActivationKeyCode:E,elementsSelectable:A,zoomOnScroll:v,zoomOnPinch:T,panOnScroll:k,panOnScrollSpeed:P,panOnScrollMode:V,zoomOnDoubleClick:$,panOnDrag:B,defaultViewport:R,translateExtent:L,minZoom:H,maxZoom:f,preventScrolling:S,onSelectionContextMenu:y,noWheelClassName:M,noPanClassName:I,disableKeyboardA11y:w})=>{const C=j(du),z=Ee(d),D=Ee(m),O=D||B,F=D||k,X=z||g&&O!==!0;return Ql({deleteKeyCode:c,multiSelectionKeyCode:_}),N.createElement(eu,{onMove:a,onMoveStart:u,onMoveEnd:l,onPaneContextMenu:i,elementsSelectable:A,zoomOnScroll:v,zoomOnPinch:T,panOnScroll:F,panOnScrollSpeed:P,panOnScrollMode:V,zoomOnDoubleClick:$,panOnDrag:!z&&O,defaultViewport:R,translateExtent:L,minZoom:H,maxZoom:f,zoomActivationKeyCode:E,preventScrolling:S,noWheelClassName:M,noPanClassName:I},N.createElement($o,{onSelectionStart:x,onSelectionEnd:p,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:O,isSelecting:!!X,selectionMode:h},t,C&&N.createElement(fu,{onSelectionContextMenu:y,noPanClassName:I,disableKeyboardA11y:w})))};Do.displayName="FlowRenderer";var hu=b.memo(Do);function gu(t){return j(b.useCallback(n=>t?ao(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function mu(t){const e={input:ge(t.input||wo),default:ge(t.default||xn),output:ge(t.output||xo),group:ge(t.group||Pn)},n={},r=Object.keys(t).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,i)=>(o[i]=ge(t[i]||xn),o),n);return{...e,...r}}const pu=({x:t,y:e,width:n,height:r,origin:o})=>!n||!r?{x:t,y:e}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:t,y:e}:{x:t-n*o[0],y:e-r*o[1]},yu=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),Ro=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:i,onError:s}=j(yu,ot),c=gu(t.onlyRenderVisibleElements),a=b.useRef(),u=b.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const l=new ResizeObserver(d=>{const g=d.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));i(g)});return a.current=l,l},[]);return b.useEffect(()=>()=>{var l;(l=a==null?void 0:a.current)==null||l.disconnect()},[]),N.createElement("div",{className:"react-flow__nodes",style:Bn},c.map(l=>{var T,k,P;let d=l.type||"default";t.nodeTypes[d]||(s==null||s("003",Mt.error003(d)),d="default");const g=t.nodeTypes[d]||t.nodeTypes.default,h=!!(l.draggable||e&&typeof l.draggable>"u"),x=!!(l.selectable||o&&typeof l.selectable>"u"),p=!!(l.connectable||n&&typeof l.connectable>"u"),_=!!(l.focusable||r&&typeof l.focusable>"u"),m=t.nodeExtent?Tn(l.positionAbsolute,t.nodeExtent):l.positionAbsolute,E=(m==null?void 0:m.x)??0,A=(m==null?void 0:m.y)??0,v=pu({x:E,y:A,width:l.width??0,height:l.height??0,origin:t.nodeOrigin});return N.createElement(g,{key:l.id,id:l.id,className:l.className,style:l.style,type:d,data:l.data,sourcePosition:l.sourcePosition||U.Bottom,targetPosition:l.targetPosition||U.Top,hidden:l.hidden,xPos:E,yPos:A,xPosOrigin:v.x,yPosOrigin:v.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!l.selected,isDraggable:h,isSelectable:x,isConnectable:p,isFocusable:_,resizeObserver:u,dragHandle:l.dragHandle,zIndex:((T=l[tt])==null?void 0:T.z)??0,isParent:!!((k=l[tt])!=null&&k.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!l.width&&!!l.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:l.ariaLabel,hasHandleBounds:!!((P=l[tt])!=null&&P.handleBounds)})}))};Ro.displayName="NodeRenderer";var wu=b.memo(Ro);const vu=(t,e,n)=>n===U.Left?t-e:n===U.Right?t+e:t,xu=(t,e,n)=>n===U.Top?t-e:n===U.Bottom?t+e:t,pr="react-flow__edgeupdater",yr=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:i,onMouseOut:s,type:c})=>N.createElement("circle",{onMouseDown:o,onMouseEnter:i,onMouseOut:s,className:st([pr,`${pr}-${c}`]),cx:vu(e,r,t),cy:xu(n,r,t),r,stroke:"transparent",fill:"transparent"}),_u=()=>!0;var Jt=t=>{const e=({id:n,className:r,type:o,data:i,onClick:s,onEdgeDoubleClick:c,selected:a,animated:u,label:l,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:p,style:_,source:m,target:E,sourceX:A,sourceY:v,targetX:T,targetY:k,sourcePosition:P,targetPosition:V,elementsSelectable:$,hidden:B,sourceHandleId:R,targetHandleId:L,onContextMenu:H,onMouseEnter:f,onMouseMove:S,onMouseLeave:y,reconnectRadius:M,onReconnect:I,onReconnectStart:w,onReconnectEnd:C,markerEnd:z,markerStart:D,rfId:O,ariaLabel:F,isFocusable:X,isReconnectable:W,pathOptions:G,interactionWidth:Q,disableKeyboardA11y:q})=>{const K=b.useRef(null),[it,nt]=b.useState(!1),[lt,ct]=b.useState(!1),et=rt(),ft=b.useMemo(()=>`url('#${wn(D,O)}')`,[D,O]),J=b.useMemo(()=>`url('#${wn(z,O)}')`,[z,O]);if(B)return null;const Y=at=>{var vt;const{edges:mt,addSelectedEdges:Rt,unselectNodesAndEdges:Pt,multiSelectionActive:Ht}=et.getState(),St=mt.find(ae=>ae.id===n);St&&($&&(et.setState({nodesSelectionActive:!1}),St.selected&&Ht?(Pt({nodes:[],edges:[St]}),(vt=K.current)==null||vt.blur()):Rt([n])),s&&s(at,St))},ut=de(n,et.getState,c),_t=de(n,et.getState,H),se=de(n,et.getState,f),Ut=de(n,et.getState,S),Xt=de(n,et.getState,y),Et=(at,mt)=>{if(at.button!==0)return;const{edges:Rt,isValidConnection:Pt}=et.getState(),Ht=mt?E:m,St=(mt?L:R)||null,vt=mt?"target":"source",ae=Pt||_u,Qe=mt,le=Rt.find(Bt=>Bt.id===n);ct(!0),w==null||w(at,le,vt);const Je=Bt=>{ct(!1),C==null||C(Bt,le,vt)};go({event:at,handleId:St,nodeId:Ht,onConnect:Bt=>I==null?void 0:I(le,Bt),isTarget:Qe,getState:et.getState,setState:et.setState,isValidConnection:ae,edgeUpdaterType:vt,onReconnectEnd:Je})},Wt=at=>Et(at,!0),zt=at=>Et(at,!1),Dt=()=>nt(!0),Zt=()=>nt(!1),Gt=!$&&!s,ce=at=>{var mt;if(!q&&eo.includes(at.key)&&$){const{unselectNodesAndEdges:Rt,addSelectedEdges:Pt,edges:Ht}=et.getState();at.key==="Escape"?((mt=K.current)==null||mt.blur(),Rt({edges:[Ht.find(vt=>vt.id===n)]})):Pt([n])}};return N.createElement("g",{className:st(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:a,animated:u,inactive:Gt,updating:it}]),onClick:Y,onDoubleClick:ut,onContextMenu:_t,onMouseEnter:se,onMouseMove:Ut,onMouseLeave:Xt,onKeyDown:X?ce:void 0,tabIndex:X?0:void 0,role:X?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":F===null?void 0:F||`Edge from ${m} to ${E}`,"aria-describedby":X?`${So}-${O}`:void 0,ref:K},!lt&&N.createElement(t,{id:n,source:m,target:E,selected:a,animated:u,label:l,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:p,data:i,style:_,sourceX:A,sourceY:v,targetX:T,targetY:k,sourcePosition:P,targetPosition:V,sourceHandleId:R,targetHandleId:L,markerStart:ft,markerEnd:J,pathOptions:G,interactionWidth:Q}),W&&N.createElement(N.Fragment,null,(W==="source"||W===!0)&&N.createElement(yr,{position:P,centerX:A,centerY:v,radius:M,onMouseDown:Wt,onMouseEnter:Dt,onMouseOut:Zt,type:"source"}),(W==="target"||W===!0)&&N.createElement(yr,{position:V,centerX:T,centerY:k,radius:M,onMouseDown:zt,onMouseEnter:Dt,onMouseOut:Zt,type:"target"})))};return e.displayName="EdgeWrapper",b.memo(e)};function Eu(t){const e={default:Jt(t.default||Fe),straight:Jt(t.bezier||zn),step:Jt(t.step||In),smoothstep:Jt(t.step||Ke),simplebezier:Jt(t.simplebezier||kn)},n={},r=Object.keys(t).filter(o=>!["default","bezier"].includes(o)).reduce((o,i)=>(o[i]=Jt(t[i]||Fe),o),n);return{...e,...r}}function wr(t,e,n=null){const r=((n==null?void 0:n.x)||0)+e.x,o=((n==null?void 0:n.y)||0)+e.y,i=(n==null?void 0:n.width)||e.width,s=(n==null?void 0:n.height)||e.height;switch(t){case U.Top:return{x:r+i/2,y:o};case U.Right:return{x:r+i,y:o+s/2};case U.Bottom:return{x:r+i/2,y:o+s};case U.Left:return{x:r,y:o+s/2}}}function vr(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const Su=(t,e,n,r,o,i)=>{const s=wr(n,t,e),c=wr(i,r,o);return{sourceX:s.x,sourceY:s.y,targetX:c.x,targetY:c.y}};function bu({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:i,width:s,height:c,transform:a}){const u={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+o),y2:Math.max(t.y+r,e.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const l=xe({x:(0-a[0])/a[2],y:(0-a[1])/a[2],width:s/a[2],height:c/a[2]}),d=Math.max(0,Math.min(l.x2,u.x2)-Math.max(l.x,u.x)),g=Math.max(0,Math.min(l.y2,u.y2)-Math.max(l.y,u.y));return Math.ceil(d*g)>0}function xr(t){var r,o,i,s,c;const e=((r=t==null?void 0:t[tt])==null?void 0:r.handleBounds)||null,n=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.x)<"u"&&typeof((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.x)||0,y:((c=t==null?void 0:t.positionAbsolute)==null?void 0:c.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!n]}const Nu=[{level:0,isMaxLevel:!0,edges:[]}];function Au(t,e,n=!1){let r=-1;const o=t.reduce((s,c)=>{var l,d;const a=gt(c.zIndex);let u=a?c.zIndex:0;if(n){const g=e.get(c.target),h=e.get(c.source),x=c.selected||(g==null?void 0:g.selected)||(h==null?void 0:h.selected),p=Math.max(((l=h==null?void 0:h[tt])==null?void 0:l.z)||0,((d=g==null?void 0:g[tt])==null?void 0:d.z)||0,1e3);u=(a?c.zIndex:0)+(x?p:0)}return s[u]?s[u].push(c):s[u]=[c],r=u>r?u:r,s},{}),i=Object.entries(o).map(([s,c])=>{const a=+s;return{edges:c,level:a,isMaxLevel:a===r}});return i.length===0?Nu:i}function Cu(t,e,n){const r=j(b.useCallback(o=>t?o.edges.filter(i=>{const s=e.get(i.source),c=e.get(i.target);return(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(c==null?void 0:c.width)&&(c==null?void 0:c.height)&&bu({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:c.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:c.width,targetHeight:c.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[t,e]));return Au(r,e,n)}const Mu=({color:t="none",strokeWidth:e=1})=>N.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),$u=({color:t="none",strokeWidth:e=1})=>N.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),_r={[Le.Arrow]:Mu,[Le.ArrowClosed]:$u};function Tu(t){const e=rt();return b.useMemo(()=>{var o,i;return Object.prototype.hasOwnProperty.call(_r,t)?_r[t]:((i=(o=e.getState()).onError)==null||i.call(o,"009",Mt.error009(t)),null)},[t])}const ku=({id:t,type:e,color:n,width:r=12.5,height:o=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:c="auto-start-reverse"})=>{const a=Tu(e);return a?N.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:c,refX:"0",refY:"0"},N.createElement(a,{color:n,strokeWidth:s})):null},Iu=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((o,i)=>([i.markerStart,i.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const c=wn(s,e);r.includes(c)||(o.push({id:c,color:s.color||t,...s}),r.push(c))}}),o),[]).sort((o,i)=>o.id.localeCompare(i.id))},Po=({defaultColor:t,rfId:e})=>{const n=j(b.useCallback(Iu({defaultColor:t,rfId:e}),[t,e]),(r,o)=>!(r.length!==o.length||r.some((i,s)=>i.id!==o[s].id)));return N.createElement("defs",null,n.map(r=>N.createElement(ku,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};Po.displayName="MarkerDefinitions";var zu=b.memo(Po);const Du=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),Ho=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:i,onEdgeContextMenu:s,onEdgeMouseEnter:c,onEdgeMouseMove:a,onEdgeMouseLeave:u,onEdgeClick:l,onEdgeDoubleClick:d,onReconnect:g,onReconnectStart:h,onReconnectEnd:x,reconnectRadius:p,children:_,disableKeyboardA11y:m})=>{const{edgesFocusable:E,edgesUpdatable:A,elementsSelectable:v,width:T,height:k,connectionMode:P,nodeInternals:V,onError:$}=j(Du,ot),B=Cu(e,V,n);return T?N.createElement(N.Fragment,null,B.map(({level:R,edges:L,isMaxLevel:H})=>N.createElement("svg",{key:R,style:{zIndex:R},width:T,height:k,className:"react-flow__edges react-flow__container"},H&&N.createElement(zu,{defaultColor:t,rfId:r}),N.createElement("g",null,L.map(f=>{const[S,y,M]=xr(V.get(f.source)),[I,w,C]=xr(V.get(f.target));if(!M||!C)return null;let z=f.type||"default";o[z]||($==null||$("011",Mt.error011(z)),z="default");const D=o[z]||o.default,O=P===Yt.Strict?w.target:(w.target??[]).concat(w.source??[]),F=vr(y.source,f.sourceHandle),X=vr(O,f.targetHandle),W=(F==null?void 0:F.position)||U.Bottom,G=(X==null?void 0:X.position)||U.Top,Q=!!(f.focusable||E&&typeof f.focusable>"u"),q=f.reconnectable||f.updatable,K=typeof g<"u"&&(q||A&&typeof q>"u");if(!F||!X)return $==null||$("008",Mt.error008(F,f)),null;const{sourceX:it,sourceY:nt,targetX:lt,targetY:ct}=Su(S,F,W,I,X,G);return N.createElement(D,{key:f.id,id:f.id,className:st([f.className,i]),type:z,data:f.data,selected:!!f.selected,animated:!!f.animated,hidden:!!f.hidden,label:f.label,labelStyle:f.labelStyle,labelShowBg:f.labelShowBg,labelBgStyle:f.labelBgStyle,labelBgPadding:f.labelBgPadding,labelBgBorderRadius:f.labelBgBorderRadius,style:f.style,source:f.source,target:f.target,sourceHandleId:f.sourceHandle,targetHandleId:f.targetHandle,markerEnd:f.markerEnd,markerStart:f.markerStart,sourceX:it,sourceY:nt,targetX:lt,targetY:ct,sourcePosition:W,targetPosition:G,elementsSelectable:v,onContextMenu:s,onMouseEnter:c,onMouseMove:a,onMouseLeave:u,onClick:l,onEdgeDoubleClick:d,onReconnect:g,onReconnectStart:h,onReconnectEnd:x,reconnectRadius:p,rfId:r,ariaLabel:f.ariaLabel,isFocusable:Q,isReconnectable:K,pathOptions:"pathOptions"in f?f.pathOptions:void 0,interactionWidth:f.interactionWidth,disableKeyboardA11y:m})})))),_):null};Ho.displayName="EdgeRenderer";var Ru=b.memo(Ho);const Pu=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function Hu({children:t}){const e=j(Pu);return N.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function Bu(t){const e=Hn(),n=b.useRef(!1);b.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const Vu={[U.Left]:U.Right,[U.Right]:U.Left,[U.Top]:U.Bottom,[U.Bottom]:U.Top},Bo=({nodeId:t,handleType:e,style:n,type:r=kt.Bezier,CustomComponent:o,connectionStatus:i})=>{var k,P,V;const{fromNode:s,handleId:c,toX:a,toY:u,connectionMode:l}=j(b.useCallback($=>({fromNode:$.nodeInternals.get(t),handleId:$.connectionHandleId,toX:($.connectionPosition.x-$.transform[0])/$.transform[2],toY:($.connectionPosition.y-$.transform[1])/$.transform[2],connectionMode:$.connectionMode}),[t]),ot),d=(k=s==null?void 0:s[tt])==null?void 0:k.handleBounds;let g=d==null?void 0:d[e];if(l===Yt.Loose&&(g=g||(d==null?void 0:d[e==="source"?"target":"source"])),!s||!g)return null;const h=c?g.find($=>$.id===c):g[0],x=h?h.x+h.width/2:(s.width??0)/2,p=h?h.y+h.height/2:s.height??0,_=(((P=s.positionAbsolute)==null?void 0:P.x)??0)+x,m=(((V=s.positionAbsolute)==null?void 0:V.y)??0)+p,E=h==null?void 0:h.position,A=E?Vu[E]:null;if(!E||!A)return null;if(o)return N.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:s,fromHandle:h,fromX:_,fromY:m,toX:a,toY:u,fromPosition:E,toPosition:A,connectionStatus:i});let v="";const T={sourceX:_,sourceY:m,sourcePosition:E,targetX:a,targetY:u,targetPosition:A};return r===kt.Bezier?[v]=so(T):r===kt.Step?[v]=yn({...T,borderRadius:0}):r===kt.SmoothStep?[v]=yn(T):r===kt.SimpleBezier?[v]=io(T):v=`M${_},${m} ${a},${u}`,N.createElement("path",{d:v,fill:"none",className:"react-flow__connection-path",style:n})};Bo.displayName="ConnectionLine";const Lu=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function Fu({containerStyle:t,style:e,type:n,component:r}){const{nodeId:o,handleType:i,nodesConnectable:s,width:c,height:a,connectionStatus:u}=j(Lu,ot);return!(o&&i&&c&&s)?null:N.createElement("svg",{style:t,width:c,height:a,className:"react-flow__edges react-flow__connectionline react-flow__container"},N.createElement("g",{className:st(["react-flow__connection",u])},N.createElement(Bo,{nodeId:o,handleType:i,style:e,type:n,CustomComponent:r,connectionStatus:u})))}function Er(t,e){return b.useRef(null),rt(),b.useMemo(()=>e(t),[t])}const Vo=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:i,onNodeClick:s,onEdgeClick:c,onNodeDoubleClick:a,onEdgeDoubleClick:u,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:g,onNodeContextMenu:h,onSelectionContextMenu:x,onSelectionStart:p,onSelectionEnd:_,connectionLineType:m,connectionLineStyle:E,connectionLineComponent:A,connectionLineContainerStyle:v,selectionKeyCode:T,selectionOnDrag:k,selectionMode:P,multiSelectionKeyCode:V,panActivationKeyCode:$,zoomActivationKeyCode:B,deleteKeyCode:R,onlyRenderVisibleElements:L,elementsSelectable:H,selectNodesOnDrag:f,defaultViewport:S,translateExtent:y,minZoom:M,maxZoom:I,preventScrolling:w,defaultMarkerColor:C,zoomOnScroll:z,zoomOnPinch:D,panOnScroll:O,panOnScrollSpeed:F,panOnScrollMode:X,zoomOnDoubleClick:W,panOnDrag:G,onPaneClick:Q,onPaneMouseEnter:q,onPaneMouseMove:K,onPaneMouseLeave:it,onPaneScroll:nt,onPaneContextMenu:lt,onEdgeContextMenu:ct,onEdgeMouseEnter:et,onEdgeMouseMove:ft,onEdgeMouseLeave:J,onReconnect:Y,onReconnectStart:ut,onReconnectEnd:_t,reconnectRadius:se,noDragClassName:Ut,noWheelClassName:Xt,noPanClassName:Et,elevateEdgesOnSelect:Wt,disableKeyboardA11y:zt,nodeOrigin:Dt,nodeExtent:Zt,rfId:Gt})=>{const ce=Er(t,mu),at=Er(e,Eu);return Bu(i),N.createElement(hu,{onPaneClick:Q,onPaneMouseEnter:q,onPaneMouseMove:K,onPaneMouseLeave:it,onPaneContextMenu:lt,onPaneScroll:nt,deleteKeyCode:R,selectionKeyCode:T,selectionOnDrag:k,selectionMode:P,onSelectionStart:p,onSelectionEnd:_,multiSelectionKeyCode:V,panActivationKeyCode:$,zoomActivationKeyCode:B,elementsSelectable:H,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:z,zoomOnPinch:D,zoomOnDoubleClick:W,panOnScroll:O,panOnScrollSpeed:F,panOnScrollMode:X,panOnDrag:G,defaultViewport:S,translateExtent:y,minZoom:M,maxZoom:I,onSelectionContextMenu:x,preventScrolling:w,noDragClassName:Ut,noWheelClassName:Xt,noPanClassName:Et,disableKeyboardA11y:zt},N.createElement(Hu,null,N.createElement(Ru,{edgeTypes:at,onEdgeClick:c,onEdgeDoubleClick:u,onlyRenderVisibleElements:L,onEdgeContextMenu:ct,onEdgeMouseEnter:et,onEdgeMouseMove:ft,onEdgeMouseLeave:J,onReconnect:Y,onReconnectStart:ut,onReconnectEnd:_t,reconnectRadius:se,defaultMarkerColor:C,noPanClassName:Et,elevateEdgesOnSelect:!!Wt,disableKeyboardA11y:zt,rfId:Gt},N.createElement(Fu,{style:E,type:m,component:A,containerStyle:v})),N.createElement("div",{className:"react-flow__edgelabel-renderer"}),N.createElement(wu,{nodeTypes:ce,onNodeClick:s,onNodeDoubleClick:a,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:g,onNodeContextMenu:h,selectNodesOnDrag:f,onlyRenderVisibleElements:L,noPanClassName:Et,noDragClassName:Ut,disableKeyboardA11y:zt,nodeOrigin:Dt,nodeExtent:Zt,rfId:Gt})))};Vo.displayName="GraphView";var Ou=b.memo(Vo);const En=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],$t={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:En,nodeExtent:En,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Yt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:pl,isValidConnection:void 0},Yu=()=>rs((t,e)=>({...$t,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:i}=e();t({nodeInternals:on(n,r,o,i)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{const o=typeof n<"u",i=typeof r<"u",s=o?on(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:s,edges:i?r:[],hasDefaultNodes:o,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:i,fitViewOnInitDone:s,fitViewOnInitOptions:c,domNode:a,nodeOrigin:u}=e(),l=a==null?void 0:a.querySelector(".react-flow__viewport");if(!l)return;const d=window.getComputedStyle(l),{m22:g}=new window.DOMMatrixReadOnly(d.transform),h=n.reduce((p,_)=>{const m=o.get(_.id);if(m!=null&&m.hidden)o.set(m.id,{...m,[tt]:{...m[tt],handleBounds:void 0}});else if(m){const E=$n(_.nodeElement);!!(E.width&&E.height&&(m.width!==E.width||m.height!==E.height||_.forceUpdate))&&(o.set(m.id,{...m,[tt]:{...m[tt],handleBounds:{source:mr(".source",_.nodeElement,g,u),target:mr(".target",_.nodeElement,g,u)}},...E}),p.push({id:m.id,type:"dimensions",dimensions:E}))}return p},[]);No(o,u);const x=s||i&&!s&&Ao(e,{initial:!0,...c});t({nodeInternals:new Map(o),fitViewOnInitDone:x}),(h==null?void 0:h.length)>0&&(r==null||r(h))},updateNodePositions:(n,r=!0,o=!1)=>{const{triggerNodeChanges:i}=e(),s=n.map(c=>{const a={id:c.id,type:"position",dragging:o};return r&&(a.positionAbsolute=c.positionAbsolute,a.position=c.position),a});i(s)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:i,nodeOrigin:s,getNodes:c,elevateNodesOnSelect:a}=e();if(n!=null&&n.length){if(i){const u=Mo(n,c()),l=on(u,o,s,a);t({nodeInternals:l})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:i}=e();let s,c=null;r?s=n.map(a=>Tt(a,!0)):(s=jt(i(),n),c=jt(o,[])),$e({changedNodes:s,changedEdges:c,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:i}=e();let s,c=null;r?s=n.map(a=>Tt(a,!0)):(s=jt(o,n),c=jt(i(),[])),$e({changedNodes:c,changedEdges:s,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:o,getNodes:i}=e(),s=n||i(),c=r||o,a=s.map(l=>(l.selected=!1,Tt(l.id,!1))),u=c.map(l=>Tt(l.id,!1));$e({changedNodes:a,changedEdges:u,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=e();r==null||r.scaleExtent([n,o]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=e();r==null||r.scaleExtent([o,n]),t({maxZoom:n})},setTranslateExtent:n=>{var r;(r=e().d3Zoom)==null||r.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),i=r().filter(c=>c.selected).map(c=>Tt(c.id,!1)),s=n.filter(c=>c.selected).map(c=>Tt(c.id,!1));$e({changedNodes:i,changedEdges:s,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(o=>{o.positionAbsolute=Tn(o.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:o,height:i,d3Zoom:s,d3Selection:c,translateExtent:a}=e();if(!s||!c||!n.x&&!n.y)return!1;const u=At.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),l=[[0,0],[o,i]],d=s==null?void 0:s.constrain()(u,l,a);return s.transform(c,d),r[0]!==d.x||r[1]!==d.y||r[2]!==d.k},cancelConnection:()=>t({connectionNodeId:$t.connectionNodeId,connectionHandleId:$t.connectionHandleId,connectionHandleType:$t.connectionHandleType,connectionStatus:$t.connectionStatus,connectionStartHandle:$t.connectionStartHandle,connectionEndHandle:$t.connectionEndHandle}),reset:()=>t({...$t})}),Object.is),Lo=({children:t})=>{const e=b.useRef(null);return e.current||(e.current=Yu()),N.createElement(ll,{value:e.current},t)};Lo.displayName="ReactFlowProvider";const Fo=({children:t})=>b.useContext(Ge)?N.createElement(N.Fragment,null,t):N.createElement(Lo,null,t);Fo.displayName="ReactFlowWrapper";const Uu={input:wo,default:xn,output:xo,group:Pn},Xu={default:Fe,straight:zn,step:In,smoothstep:Ke,simplebezier:kn},Wu=[0,0],Zu=[15,15],Gu={x:0,y:0,zoom:1},Ku={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},qu=b.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:i=Uu,edgeTypes:s=Xu,onNodeClick:c,onEdgeClick:a,onInit:u,onMove:l,onMoveStart:d,onMoveEnd:g,onConnect:h,onConnectStart:x,onConnectEnd:p,onClickConnectStart:_,onClickConnectEnd:m,onNodeMouseEnter:E,onNodeMouseMove:A,onNodeMouseLeave:v,onNodeContextMenu:T,onNodeDoubleClick:k,onNodeDragStart:P,onNodeDrag:V,onNodeDragStop:$,onNodesDelete:B,onEdgesDelete:R,onSelectionChange:L,onSelectionDragStart:H,onSelectionDrag:f,onSelectionDragStop:S,onSelectionContextMenu:y,onSelectionStart:M,onSelectionEnd:I,connectionMode:w=Yt.Strict,connectionLineType:C=kt.Bezier,connectionLineStyle:z,connectionLineComponent:D,connectionLineContainerStyle:O,deleteKeyCode:F="Backspace",selectionKeyCode:X="Shift",selectionOnDrag:W=!1,selectionMode:G=_e.Full,panActivationKeyCode:Q="Space",multiSelectionKeyCode:q=Ve()?"Meta":"Control",zoomActivationKeyCode:K=Ve()?"Meta":"Control",snapToGrid:it=!1,snapGrid:nt=Zu,onlyRenderVisibleElements:lt=!1,selectNodesOnDrag:ct=!0,nodesDraggable:et,nodesConnectable:ft,nodesFocusable:J,nodeOrigin:Y=Wu,edgesFocusable:ut,edgesUpdatable:_t,elementsSelectable:se,defaultViewport:Ut=Gu,minZoom:Xt=.5,maxZoom:Et=2,translateExtent:Wt=En,preventScrolling:zt=!0,nodeExtent:Dt,defaultMarkerColor:Zt="#b1b1b7",zoomOnScroll:Gt=!0,zoomOnPinch:ce=!0,panOnScroll:at=!1,panOnScrollSpeed:mt=.5,panOnScrollMode:Rt=Lt.Free,zoomOnDoubleClick:Pt=!0,panOnDrag:Ht=!0,onPaneClick:St,onPaneMouseEnter:vt,onPaneMouseMove:ae,onPaneMouseLeave:Qe,onPaneScroll:le,onPaneContextMenu:Je,children:Vn,onEdgeContextMenu:Bt,onEdgeDoubleClick:Zo,onEdgeMouseEnter:Go,onEdgeMouseMove:Ko,onEdgeMouseLeave:qo,onEdgeUpdate:Qo,onEdgeUpdateStart:Jo,onEdgeUpdateEnd:jo,onReconnect:ti,onReconnectStart:ei,onReconnectEnd:ni,reconnectRadius:ri=10,edgeUpdaterRadius:oi=10,onNodesChange:ii,onEdgesChange:si,noDragClassName:ci="nodrag",noWheelClassName:ai="nowheel",noPanClassName:Ln="nopan",fitView:li=!1,fitViewOptions:ui,connectOnClick:fi=!0,attributionPosition:di,proOptions:hi,defaultEdgeOptions:gi,elevateNodesOnSelect:mi=!0,elevateEdgesOnSelect:pi=!1,disableKeyboardA11y:Fn=!1,autoPanOnConnect:yi=!0,autoPanOnNodeDrag:wi=!0,connectionRadius:vi=20,isValidConnection:xi,onError:_i,style:Ei,id:On,nodeDragThreshold:Si,...bi},Ni)=>{const je=On||"1";return N.createElement("div",{...bi,style:{...Ei,...Ku},ref:Ni,className:st(["react-flow",o]),"data-testid":"rf__wrapper",id:On},N.createElement(Fo,null,N.createElement(Ou,{onInit:u,onMove:l,onMoveStart:d,onMoveEnd:g,onNodeClick:c,onEdgeClick:a,onNodeMouseEnter:E,onNodeMouseMove:A,onNodeMouseLeave:v,onNodeContextMenu:T,onNodeDoubleClick:k,nodeTypes:i,edgeTypes:s,connectionLineType:C,connectionLineStyle:z,connectionLineComponent:D,connectionLineContainerStyle:O,selectionKeyCode:X,selectionOnDrag:W,selectionMode:G,deleteKeyCode:F,multiSelectionKeyCode:q,panActivationKeyCode:Q,zoomActivationKeyCode:K,onlyRenderVisibleElements:lt,selectNodesOnDrag:ct,defaultViewport:Ut,translateExtent:Wt,minZoom:Xt,maxZoom:Et,preventScrolling:zt,zoomOnScroll:Gt,zoomOnPinch:ce,zoomOnDoubleClick:Pt,panOnScroll:at,panOnScrollSpeed:mt,panOnScrollMode:Rt,panOnDrag:Ht,onPaneClick:St,onPaneMouseEnter:vt,onPaneMouseMove:ae,onPaneMouseLeave:Qe,onPaneScroll:le,onPaneContextMenu:Je,onSelectionContextMenu:y,onSelectionStart:M,onSelectionEnd:I,onEdgeContextMenu:Bt,onEdgeDoubleClick:Zo,onEdgeMouseEnter:Go,onEdgeMouseMove:Ko,onEdgeMouseLeave:qo,onReconnect:ti??Qo,onReconnectStart:ei??Jo,onReconnectEnd:ni??jo,reconnectRadius:ri??oi,defaultMarkerColor:Zt,noDragClassName:ci,noWheelClassName:ai,noPanClassName:Ln,elevateEdgesOnSelect:pi,rfId:je,disableKeyboardA11y:Fn,nodeOrigin:Y,nodeExtent:Dt}),N.createElement(Vl,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:x,onConnectEnd:p,onClickConnectStart:_,onClickConnectEnd:m,nodesDraggable:et,nodesConnectable:ft,nodesFocusable:J,edgesFocusable:ut,edgesUpdatable:_t,elementsSelectable:se,elevateNodesOnSelect:mi,minZoom:Xt,maxZoom:Et,nodeExtent:Dt,onNodesChange:ii,onEdgesChange:si,snapToGrid:it,snapGrid:nt,connectionMode:w,translateExtent:Wt,connectOnClick:fi,defaultEdgeOptions:gi,fitView:li,fitViewOptions:ui,onNodesDelete:B,onEdgesDelete:R,onNodeDragStart:P,onNodeDrag:V,onNodeDragStop:$,onSelectionDrag:f,onSelectionDragStart:H,onSelectionDragStop:S,noPanClassName:Ln,nodeOrigin:Y,rfId:je,autoPanOnConnect:yi,autoPanOnNodeDrag:wi,onError:_i,connectionRadius:vi,isValidConnection:xi,nodeDragThreshold:Si}),N.createElement(Hl,{onSelectionChange:L}),Vn,N.createElement(fl,{proOptions:hi,position:di}),N.createElement(Ul,{rfId:je,disableKeyboardA11y:Fn})))});qu.displayName="ReactFlow";function Oo(t){return e=>{const[n,r]=b.useState(e),o=b.useCallback(i=>r(s=>t(i,s)),[]);return[n,r,o]}}const xf=Oo(Mo),_f=Oo(ou),Yo=({id:t,x:e,y:n,width:r,height:o,style:i,color:s,strokeColor:c,strokeWidth:a,className:u,borderRadius:l,shapeRendering:d,onClick:g,selected:h})=>{const{background:x,backgroundColor:p}=i||{},_=s||x||p;return N.createElement("rect",{className:st(["react-flow__minimap-node",{selected:h},u]),x:e,y:n,rx:l,ry:l,width:r,height:o,fill:_,stroke:c,strokeWidth:a,shapeRendering:d,onClick:g?m=>g(m,t):void 0})};Yo.displayName="MiniMapNode";var Qu=b.memo(Yo);const Ju=t=>t.nodeOrigin,ju=t=>t.getNodes().filter(e=>!e.hidden&&e.width&&e.height),ln=t=>t instanceof Function?t:()=>t;function tf({nodeStrokeColor:t="transparent",nodeColor:e="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o=2,nodeComponent:i=Qu,onClick:s}){const c=j(ju,ot),a=j(Ju),u=ln(e),l=ln(t),d=ln(n),g=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return N.createElement(N.Fragment,null,c.map(h=>{const{x,y:p}=Ft(h,a).positionAbsolute;return N.createElement(i,{key:h.id,x,y:p,width:h.width,height:h.height,style:h.style,selected:h.selected,className:d(h),color:u(h),borderRadius:r,strokeColor:l(h),strokeWidth:o,shapeRendering:g,onClick:s,id:h.id})}))}var ef=b.memo(tf);const nf=200,rf=150,of=t=>{const e=t.getNodes(),n={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:n,boundingRect:e.length>0?gl(qe(e,t.nodeOrigin),n):n,rfId:t.rfId}},sf="react-flow__minimap-desc";function Uo({style:t,className:e,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:s=2,nodeComponent:c,maskColor:a="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:l=1,position:d="bottom-right",onClick:g,onNodeClick:h,pannable:x=!1,zoomable:p=!1,ariaLabel:_="React Flow mini map",inversePan:m=!1,zoomStep:E=10,offsetScale:A=5}){const v=rt(),T=b.useRef(null),{boundingRect:k,viewBB:P,rfId:V}=j(of,ot),$=(t==null?void 0:t.width)??nf,B=(t==null?void 0:t.height)??rf,R=k.width/$,L=k.height/B,H=Math.max(R,L),f=H*$,S=H*B,y=A*H,M=k.x-(f-k.width)/2-y,I=k.y-(S-k.height)/2-y,w=f+y*2,C=S+y*2,z=`${sf}-${V}`,D=b.useRef(0);D.current=H,b.useEffect(()=>{if(T.current){const X=ht(T.current),W=q=>{const{transform:K,d3Selection:it,d3Zoom:nt}=v.getState();if(q.sourceEvent.type!=="wheel"||!it||!nt)return;const lt=-q.sourceEvent.deltaY*(q.sourceEvent.deltaMode===1?.05:q.sourceEvent.deltaMode?1:.002)*E,ct=K[2]*Math.pow(2,lt);nt.scaleTo(it,ct)},G=q=>{const{transform:K,d3Selection:it,d3Zoom:nt,translateExtent:lt,width:ct,height:et}=v.getState();if(q.sourceEvent.type!=="mousemove"||!it||!nt)return;const ft=D.current*Math.max(1,K[2])*(m?-1:1),J={x:K[0]-q.sourceEvent.movementX*ft,y:K[1]-q.sourceEvent.movementY*ft},Y=[[0,0],[ct,et]],ut=At.translate(J.x,J.y).scale(K[2]),_t=nt.constrain()(ut,Y,lt);nt.transform(it,_t)},Q=Kr().on("zoom",x?G:null).on("zoom.wheel",p?W:null);return X.call(Q),()=>{X.on("zoom",null)}}},[x,p,m,E]);const O=g?X=>{const W=pt(X);g(X,{x:W[0],y:W[1]})}:void 0,F=h?(X,W)=>{const G=v.getState().nodeInternals.get(W);h(X,G)}:void 0;return N.createElement(Mn,{position:d,style:t,className:st(["react-flow__minimap",e]),"data-testid":"rf__minimap"},N.createElement("svg",{width:$,height:B,viewBox:`${M} ${I} ${w} ${C}`,role:"img","aria-labelledby":z,ref:T,onClick:O},_&&N.createElement("title",{id:z},_),N.createElement(ef,{onClick:F,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:o,nodeStrokeWidth:s,nodeComponent:c}),N.createElement("path",{className:"react-flow__minimap-mask",d:`M${M-y},${I-y}h${w+y*2}v${C+y*2}h${-w-y*2}z
        M${P.x},${P.y}h${P.width}v${P.height}h${-P.width}z`,fill:a,fillRule:"evenodd",stroke:u,strokeWidth:l,pointerEvents:"none"})))}Uo.displayName="MiniMap";var Ef=b.memo(Uo);function cf(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},N.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function af(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},N.createElement("path",{d:"M0 0h32v4.2H0z"}))}function lf(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},N.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function uf(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},N.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function ff(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},N.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const ye=({children:t,className:e,...n})=>N.createElement("button",{type:"button",className:st(["react-flow__controls-button",e]),...n},t);ye.displayName="ControlButton";const df=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),Xo=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:i,onZoomOut:s,onFitView:c,onInteractiveChange:a,className:u,children:l,position:d="bottom-left"})=>{const g=rt(),[h,x]=b.useState(!1),{isInteractive:p,minZoomReached:_,maxZoomReached:m}=j(df,ot),{zoomIn:E,zoomOut:A,fitView:v}=Hn();if(b.useEffect(()=>{x(!0)},[]),!h)return null;const T=()=>{E(),i==null||i()},k=()=>{A(),s==null||s()},P=()=>{v(o),c==null||c()},V=()=>{g.setState({nodesDraggable:!p,nodesConnectable:!p,elementsSelectable:!p}),a==null||a(!p)};return N.createElement(Mn,{className:st(["react-flow__controls",u]),position:d,style:t,"data-testid":"rf__controls"},e&&N.createElement(N.Fragment,null,N.createElement(ye,{onClick:T,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m},N.createElement(cf,null)),N.createElement(ye,{onClick:k,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:_},N.createElement(af,null))),n&&N.createElement(ye,{className:"react-flow__controls-fitview",onClick:P,title:"fit view","aria-label":"fit view"},N.createElement(lf,null)),r&&N.createElement(ye,{className:"react-flow__controls-interactive",onClick:V,title:"toggle interactivity","aria-label":"toggle interactivity"},p?N.createElement(ff,null):N.createElement(uf,null)),l)};Xo.displayName="Controls";var Sf=b.memo(Xo),yt;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(yt||(yt={}));function hf({color:t,dimensions:e,lineWidth:n}){return N.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function gf({color:t,radius:e}){return N.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const mf={[yt.Dots]:"#91919a",[yt.Lines]:"#eee",[yt.Cross]:"#e2e2e2"},pf={[yt.Dots]:1,[yt.Lines]:1,[yt.Cross]:6},yf=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function Wo({id:t,variant:e=yt.Dots,gap:n=20,size:r,lineWidth:o=1,offset:i=2,color:s,style:c,className:a}){const u=b.useRef(null),{transform:l,patternId:d}=j(yf,ot),g=s||mf[e],h=r||pf[e],x=e===yt.Dots,p=e===yt.Cross,_=Array.isArray(n)?n:[n,n],m=[_[0]*l[2]||1,_[1]*l[2]||1],E=h*l[2],A=p?[E,E]:m,v=x?[E/i,E/i]:[A[0]/i,A[1]/i];return N.createElement("svg",{className:st(["react-flow__background",a]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},N.createElement("pattern",{id:d+t,x:l[0]%m[0],y:l[1]%m[1],width:m[0],height:m[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${v[0]},-${v[1]})`},x?N.createElement(gf,{color:g,radius:E/i}):N.createElement(hf,{dimensions:A,color:g,lineWidth:o})),N.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+t})`}))}Wo.displayName="Background";var bf=b.memo(Wo);export{bf as B,Sf as C,Ef as M,Lo as R,xf as a,_f as b,zi as c,Cl as d,qu as e,ji as u};
//# sourceMappingURL=flow-DUFhSx37.js.map
